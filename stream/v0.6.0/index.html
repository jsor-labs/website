<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <title>Stream: 
Stream Component - ReactPHP</title>

        <meta name="description" content="Event-driven readable and writable streams for non-blocking I/O in ReactPHP.">

        <link rel="apple-touch-icon" sizes="180x180" href="https://jsor-labs.github.io/website/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="https://jsor-labs.github.io/website/favicon-32x32.png">
        <link rel="manifest" href="https://jsor-labs.github.io/website/manifest.json">
        <link rel="mask-icon" href="https://jsor-labs.github.io/website/safari-pinned-tab.svg" color="#4f5b93">
        <meta name="apple-mobile-web-app-title" content="ReactPHP">
        <meta name="application-name" content="ReactPHP">
        <meta name="theme-color" content="#f4f3f1">
        <meta name="msapplication-config" content="https://jsor-labs.github.io/website/browserconfig.xml" />

        <meta property="og:image" content="https://jsor-labs.github.io/website/og-image.png">

            <script>window.__assets = '../../assets/';</script>

        <link rel="preload" href="../../assets/19ca4d35c8f94db0fa14422334dd2ad3.woff" as="font" type="font/woff" crossorigin>
        <link rel="preload" href="../../assets/be4ba3dd17008135675e945b630be8f6.woff" as="font" type="font/woff" crossorigin>

        <style>@font-face{font-family:Source Sans Pro;font-style:normal;font-weight:400;font-display:swap;src:local("Source Sans Pro Regular"),local("SourceSansPro-Regular"),url(../../assets/19ca4d35c8f94db0fa14422334dd2ad3.woff) format("woff")}@font-face{font-family:Source Sans Pro;font-style:normal;font-weight:700;font-display:swap;src:local("Source Sans Pro Bold"),local("SourceSansPro-Bold"),url(../../assets/be4ba3dd17008135675e945b630be8f6.woff) format("woff")}html{box-sizing:border-box}*,:after,:before{box-sizing:inherit}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif;font-size:16px;line-height:1.5;color:#584b4f;background-color:#fff}@media (max-width:768px){body{font-size:18px}}blockquote,fieldset,form,h1,h2,h3,h4,h5,h6,hr,ol,p,ul{margin:0 0 16px}ul{margin-bottom:0}hr{clear:both;height:0;border:0;border-bottom:1px dashed #eae8e3;padding:0}h1,h2,h3,h4,h5,h6{line-height:1;-webkit-font-smoothing:antialiased;color:#584b4f;font-family:Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-weight:700}h1{font-size:2.4em;margin-bottom:32px;color:#4f5b93;letter-spacing:-1px}h1:not(:first-child){margin-top:32px}h2{font-size:1.8em;margin-bottom:32px;color:#4f5b93}h2:not(:first-child){margin-top:32px}h3{font-size:1.4em;margin-bottom:24px}h3:not(:first-child){margin-top:24px}h4{font-size:1.2em;color:#4f5b93}h4:not(:first-child){margin-top:24px}@media (max-width:768px){h1{font-size:1.8em}h2{font-size:1.6em;margin-bottom:32px}}.container{padding:32px}@media (max-width:768px){.container{padding:16px}}.wrapper{max-width:960px;margin:auto}.wrapper--wide{max-width:1280px}.wrapper--narrow{max-width:640px}.main{width:calc(98% - 400px);margin-bottom:64px}.sidebar{width:calc(400px - 2%);margin-bottom:32px}@media (max-width:1024px){.main,.sidebar{width:auto}}.grid{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:102%;margin-left:-2%}.grid>*{margin-left:2%;max-width:100%}.grid--4cols>*{-ms-flex-preferred-size:23%;flex-basis:23%}.grid--3cols>*{-ms-flex-preferred-size:31.33%;flex-basis:31.33%}.grid--2cols>*{-ms-flex-preferred-size:48%;flex-basis:48%}@media (max-width:768px){.grid{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.grid,.grid>*{width:100%;margin-left:0}.grid>*{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto}}.header{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;width:100%;border-bottom:1px dashed #eae8e3;padding:16px 32px}@media (max-width:768px){.header{padding:16px;margin-bottom:16px}}.header__logo{display:block;line-height:1}.header__logo svg{display:block;width:120px;height:18px}.header__search{margin:0;position:absolute;right:32px;top:6px;z-index:999}@media (max-width:768px){.header__search{right:16px}}.header__search input{width:400px}@media (max-width:768px){.header__search input{width:calc(100vw - 32px)}}.searchbox{width:100%}.searchbox,.searchbox:focus{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:6px 8px 6px 32px;font-size:16px;line-height:24px;color:#584b4f;border:0}.searchbox--collapsed:not(:focus){background-color:transparent;border:0;width:32px!important;margin-right:-12px}.welcome__intro{padding:16px 0 136px;border-bottom:1px dashed #eae8e3;background-image:radial-gradient(ellipse at center,#fff 0,#eae8e3 100%);background-size:auto 100%;background-position:50% 0}.welcome__intro h1{font-size:2em;margin-bottom:16px;color:#4f5b93}.welcome__logo{display:block;margin:0 auto;max-width:320px}.welcome__logo svg{display:block;height:240px}.welcome__content{padding-top:16px;display:block;max-width:calc(98% - 320px)}.welcome__example{display:block;margin:auto;max-width:800px;margin-top:-160px}.welcome__example .highlight pre{padding:32px;background:#fff;box-shadow:0 0 16px #d6d1c8}.welcome__intro .links a{color:#584b4f;text-decoration:none}.welcome__intro .links a:hover{color:#4f5b93;text-decoration:none}@media (max-width:768px){.welcome__content{padding:32px 16px 16px;max-width:100%}.welcome__logo svg{height:160px}.welcome__intro h1{text-align:center;font-size:1.6em;margin-bottom:16px;color:#4f5b93}.welcome__intro .links{text-align:center}}code,pre,tt{font-family:Consolas,Liberation Mono,Menlo,Courier,monospace}code,tt{font-size:.75em}pre{font-size:.85em;line-height:1.45}.links{margin:0;padding:0}.links li{display:inline-block;margin:0 8px;text-decoration:none}.links li:first-child{margin-left:0}.links li:last-child{margin-right:0}.links a{display:block}.links a,.links a:hover{text-decoration:none}.off-canvas-menu{visibility:hidden}.component-info__contributors,.component-info__title{display:-webkit-box;display:-ms-flexbox;display:flex}.component-info__contributors{-ms-flex-wrap:wrap;flex-wrap:wrap;padding:0;list-style:none}.component-info__contributors img{display:block;width:40px;height:auto}.version-selector__panel{position:fixed;top:-20000em;visibility:hidden}</style>
        <link rel="preload" href="../../assets/main.da37b1b115bc22e1c461.css" as="style" onload="this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="../../assets/main.da37b1b115bc22e1c461.css"></noscript>

        <script>!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t,n){n.p=window.__assets},,,,,function(e,t,n){n(0),e.exports=n(6)},function(e,t,n){n(7),n(8),n(10),n(11),n(13),n(15)},function(e,t,n){"use strict";function r(e){try{return(e||window).document.createElement("link").relList.supports("preload")}catch(e){return!1}}function o(e){function t(){for(var e=r.querySelectorAll('link[rel="preload"][as="style"]'),t=0;t<e.length;t++){var n,o;!function(){function i(){o.media=n.getAttribute("media")||"all",o.removeEventListener("load",i)}n=e[t],n.rel="",o=r.createElement("link"),o.rel="stylesheet",o.href=n.href,o.media="only x",o.addEventListener("load",i),n.parentNode.insertBefore(o,n.nextSibling||n)}()}}var n=e||window,r=n.document;if(t(),"complete"!==r.readyState){var o=n.setInterval(t,300);n.addEventListener("load",function(){t(),n.clearInterval(o)})}}Object.defineProperty(t,"__esModule",{value:!0}),t.supports=r,t.polyfill=o,r()||o()},function(e,t){},,function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(12);n.n(r)},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(14);n.n(r)},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(16);n.n(r)},function(e,t){}]);</script>
            </head>

    <body>
            <header class="header">
            <a class="header__logo" href="../../">
                <svg xmlns="http://www.w3.org/2000/svg" width="320" height="47.29" viewBox="0 428.964 320 47.29"><path fill="#584B4F" d="M30.86 452.385c1.637-2.287 2.455-5 2.455-8.134 0-4.313-1.367-7.87-4.088-10.68-2.723-2.812-6.39-4.216-11.004-4.216h-7.71c-3.79 0-6.49.798-8.1 2.388C.806 433.332 0 435.872 0 439.355v36.512h9.08v-17.245h6.53l9.08 17.245h10.52L24.82 457.12c2.395-.87 4.41-2.447 6.04-4.735zm-8.488-3.334c-1.24 1.33-2.82 1.99-4.734 1.99H9.08v-9.47c0-2.74 1.35-4.112 4.05-4.112h4.508c2 0 3.603.61 4.8 1.83 1.196 1.22 1.797 2.82 1.797 4.802 0 1.982-.623 3.64-1.864 4.964v-.003zm20.348 14.536c0 4.572 1.055 7.766 3.167 9.57 2.114 1.81 5.782 2.71 11.008 2.71h16.46v-8.1H57.548c-2.18 0-3.68-.35-4.51-1.045-.83-.695-1.24-1.96-1.24-3.788v-6.467h14.434l.656-8.1h-15.09v-10.912h21.56v-8.098H42.72v34.23zm57.97-33.442c-.718-.523-1.665-.787-2.84-.787-1.177 0-2.168.285-2.972.85-.807.567-1.537 1.592-2.19 3.073l-14.89 42.585h9.47l2.55-8.03h15.613l2.613 8.03h9.47l-14.893-42.588c-.567-1.572-1.21-2.613-1.93-3.135v.002zM92.1 460.19l5.75-18.42 5.487 18.418H92.1v.002zm53.074 5.455c-1.155 1.678-3.245 2.512-6.27 2.512-3.03 0-5.258-.914-6.697-2.74-1.394-1.83-2.093-5.25-2.093-10.256v-4.052c0-1.783.045-3.2.13-4.243.178-3.27.785-5.576 1.833-6.928 1.48-1.914 3.745-2.873 6.794-2.873 2.613 0 4.532.653 5.75 1.96 1.218 1.308 2.07 3.245 2.547 5.813h8.49c0-5.14-1.557-9.07-4.67-11.79-3.114-2.723-7.153-4.084-12.116-4.084-3.398 0-6.293.564-8.687 1.7-6.097 2.783-9.146 9.686-9.146 20.704v3.918c0 13.982 5.945 20.968 17.833 20.968 5.4 0 9.58-1.59 12.54-4.77 2.964-3.176 4.44-7.73 4.44-13.653h-8.426c-.346 3.53-1.1 6.134-2.25 7.81v.005zm14.667-36.29v8.1h12.412v38.41h9.08v-38.41h12.47v-8.1"/><path fill="#4F5B93" d="M218.89 429.356h-18.03v46.51h9.086v-14.897h8.944c4.876 0 8.647-1.337 11.328-4.016 2.683-2.68 4.02-6.608 4.02-11.788s-1.337-9.112-4.02-11.788c-2.68-2.68-6.454-4.02-11.328-4.02v-.002zm4.538 21.686c-1.15 1.177-2.815 1.768-5 1.768h-8.485v-15.354h8.484c4.483 0 6.73 2.572 6.73 7.71 0 2.744-.578 4.703-1.73 5.88v-.004zm43.93-2.02H250.31v-19.666h-9.088v46.51h9.086v-18.81h17.05v18.81h9.076v-46.51h-9.078m48.63 4.02c-2.683-2.68-6.46-4.02-11.335-4.02h-18.027v46.507h9.085V460.97h8.943c4.877 0 8.654-1.336 11.337-4.014 2.68-2.678 4.013-6.608 4.013-11.788s-1.332-9.112-4.013-11.79v-.003zm-6.795 17.666c-1.154 1.177-2.822 1.768-5 1.768h-8.484v-15.354h8.485c4.483 0 6.734 2.572 6.734 7.71 0 2.744-.583 4.703-1.735 5.88v-.004z"/></svg>
            </a>
            <form class="header__search">
                <input type="search" class="searchbox searchbox--collapsed" data-docsearch placeholder="Search documentation...">
            </form>
        </header>
    
        <div class="container">
        <div class="grid grid--wrap grid--gutter">
            <main class="main">
                                    <p class="alert">
                        You are browsing the documentation for <strong>Stream <code>v0.6.0</code></strong> which is an older version.
                        <a href="../../stream/v0.7.3/">Go to the latest stable version <strong>v0.7.3</strong>.</a>
                    </p>
                
                <h1>
<a id="stream-component" class="anchor" href="#stream-component" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Stream Component</h1>
<p><a href="https://travis-ci.org/reactphp/stream"><img src="https://camo.githubusercontent.com/de9b0c50fb2454d1d9e798cd5aae153c1fc715b8/68747470733a2f2f7472617669732d63692e6f72672f72656163747068702f73747265616d2e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/reactphp/stream.svg?branch=master" style="max-width:100%;"></a></p>
<p>Event-driven readable and writable streams for non-blocking I/O in <a href="https://reactphp.org/">ReactPHP</a>.</p>
<p>In order to make the <a href="https://github.com/reactphp/event-loop">EventLoop</a>
easier to use, this component introduces the concept of "streams".
They are very similar to the streams found in PHP itself,
but have an interface more suited for async, non-blocking I/O.
Mainly it provides interfaces for readable and writable streams, plus a file
descriptor based implementation with an in-memory write buffer.</p>
<p><strong>Table of contents</strong></p>
<ul>
<li>
<a href="#api">API</a>
<ul>
<li>
<a href="#readablestreaminterface">ReadableStreamInterface</a>
<ul>
<li><a href="#data-event">data event</a></li>
<li><a href="#end-event">end event</a></li>
<li><a href="#error-event">error event</a></li>
<li><a href="#close-event">close event</a></li>
<li><a href="#isreadable">isReadable()</a></li>
<li><a href="#pause">pause()</a></li>
<li><a href="#resume">resume()</a></li>
<li><a href="#pipe">pipe()</a></li>
<li><a href="#close">close()</a></li>
</ul>
</li>
<li>
<a href="#writablestreaminterface">WritableStreamInterface</a>
<ul>
<li><a href="#drain-event">drain event</a></li>
<li><a href="#pipe-event">pipe event</a></li>
<li><a href="#error-event-1">error event</a></li>
<li><a href="#close-event-1">close event</a></li>
<li><a href="#iswritable">isWritable()</a></li>
<li><a href="#write">write()</a></li>
<li><a href="#end">end()</a></li>
<li><a href="#close-1">close()</a></li>
</ul>
</li>
<li><a href="#duplexstreaminterface">DuplexStreamInterface</a></li>
<li><a href="#readableresourcestream">ReadableResourceStream</a></li>
<li><a href="#writableresourcestream">WritableResourceStream</a></li>
<li><a href="#duplexresourcestream">DuplexResourceStream</a></li>
</ul>
</li>
<li><a href="#usage">Usage</a></li>
<li><a href="#install">Install</a></li>
<li><a href="#tests">Tests</a></li>
<li><a href="#license">License</a></li>
</ul>
<h2>
<a id="api" class="anchor" href="#api" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>API</h2>
<h3>
<a id="readablestreaminterface" class="anchor" href="#readablestreaminterface" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>ReadableStreamInterface</h3>
<p>The <code>ReadableStreamInterface</code> is responsible for providing an interface for
read-only streams and the readable side of duplex streams.</p>
<p>Besides defining a few methods, this interface also implements the
<code>EventEmitterInterface</code> which allows you to react to certain events.</p>
<h4>
<a id="data-event" class="anchor" href="#data-event" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>data event</h4>
<p>The <code>data</code> event will be emitted whenever some data was read/received
from this source stream.
The event receives a single mixed argument for incoming data.</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span>on(<span class="pl-s"><span class="pl-pds">'</span>data<span class="pl-pds">'</span></span>, <span class="pl-k">function</span> (<span class="pl-smi">$data</span>) {</span>
<span class="pl-s1">    <span class="pl-c1">echo</span> <span class="pl-smi">$data</span>;</span>
<span class="pl-s1">});</span></pre></div>
<p>This event MAY be emitted any number of times, which may be zero times if
this stream does not send any data at all.
It SHOULD not be emitted after an <code>end</code> or <code>close</code> event.</p>
<p>The given <code>$data</code> argument may be of mixed type, but it's usually
recommended it SHOULD be a <code>string</code> value or MAY use a type that allows
representation as a <code>string</code> for maximum compatibility.</p>
<p>Many common streams (such as a TCP/IP connection or a file-based stream)
will emit the raw (binary) payload data that is received over the wire as
chunks of <code>string</code> values.</p>
<p>Due to the stream-based nature of this, the sender may send any number
of chunks with varying sizes. There are no guarantees that these chunks
will be received with the exact same framing the sender intended to send.
In other words, many lower-level protocols (such as TCP/IP) transfer the
data in chunks that may be anywhere between single-byte values to several
dozens of kilobytes. You may want to apply a higher-level protocol to
these low-level data chunks in order to achieve proper message framing.</p>
<h4>
<a id="end-event" class="anchor" href="#end-event" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>end event</h4>
<p>The <code>end</code> event will be emitted once the source stream has successfully
reached the end of the stream (EOF).</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span>on(<span class="pl-s"><span class="pl-pds">'</span>end<span class="pl-pds">'</span></span>, <span class="pl-k">function</span> () {</span>
<span class="pl-s1">    <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>END<span class="pl-pds">'</span></span>;</span>
<span class="pl-s1">});</span></pre></div>
<p>This event SHOULD be emitted once or never at all, depending on whether
a successful end was detected.
It SHOULD NOT be emitted after a previous <code>end</code> or <code>close</code> event.
It MUST NOT be emitted if the stream closes due to a non-successful
end, such as after a previous <code>error</code> event.</p>
<p>After the stream is ended, it MUST switch to non-readable mode,
see also <code>isReadable()</code>.</p>
<p>This event will only be emitted if the <em>end</em> was reached successfully,
not if the stream was interrupted by an unrecoverable error or explicitly
closed. Not all streams know this concept of a "successful end".
Many use-cases involve detecting when the stream closes (terminates)
instead, in this case you should use the <code>close</code> event.
After the stream emits an <code>end</code> event, it SHOULD usually be followed by a
<code>close</code> event.</p>
<p>Many common streams (such as a TCP/IP connection or a file-based stream)
will emit this event if either the remote side closes the connection or
a file handle was successfully read until reaching its end (EOF).</p>
<p>Note that this event should not be confused with the <code>end()</code> method.
This event defines a successful end <em>reading</em> from a source stream, while
the <code>end()</code> method defines <em>writing</em> a successful end to a destination
stream.</p>
<h4>
<a id="error-event" class="anchor" href="#error-event" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>error event</h4>
<p>The <code>error</code> event will be emitted whenever an error occurs, usually while
trying to read from this stream.
The event receives a single <code>Exception</code> argument for the error instance.</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$server</span><span class="pl-k">-&gt;</span>on(<span class="pl-s"><span class="pl-pds">'</span>error<span class="pl-pds">'</span></span>, <span class="pl-k">function</span> (<span class="pl-c1">Exception</span> <span class="pl-smi">$e</span>) {</span>
<span class="pl-s1">    <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>Error: <span class="pl-pds">'</span></span> <span class="pl-k">.</span> <span class="pl-smi">$e</span><span class="pl-k">-&gt;</span>getMessage() <span class="pl-k">.</span> <span class="pl-c1">PHP_EOL</span>;</span>
<span class="pl-s1">});</span></pre></div>
<p>This event MAY be emitted any number of times, which should be zero
times if this is a stream that is successfully terminated.
It SHOULD be emitted whenever the stream detects an error, such as a
transmission error or after an unexpected <code>data</code> or premature <code>end</code> event.
It SHOULD NOT be emitted after a <code>close</code> event.</p>
<p>Many common streams (such as a TCP/IP connection or a file-based stream)
only deal with data transmission and do not make assumption about data
boundaries (such as unexpected <code>data</code> or premature <code>end</code> events).
In other words, many lower-level protocols (such as TCP/IP) may choose
to only emit this for a fatal transmission error once and will thus
likely close (terminate) the stream in response.
If this is a fatal error that results in the stream being closed, it
SHOULD be followed by a <code>close</code> event.</p>
<p>Other higher-level protocols may choose to keep the stream alive after
this event, if they can recover from an error condition.</p>
<p>If this stream is a <code>DuplexStreamInterface</code>, you should also notice
how the writable side of the stream also implements an <code>error</code> event.
In other words, an error may occur while either reading or writing the
stream which should result in the same error processing.</p>
<h4>
<a id="close-event" class="anchor" href="#close-event" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>close event</h4>
<p>The <code>close</code> event will be emitted once the stream closes (terminates).</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span>on(<span class="pl-s"><span class="pl-pds">'</span>close<span class="pl-pds">'</span></span>, <span class="pl-k">function</span> () {</span>
<span class="pl-s1">    <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>CLOSED<span class="pl-pds">'</span></span>;</span>
<span class="pl-s1">});</span></pre></div>
<p>This event SHOULD be emitted once or never at all, depending on whether
the stream ever terminates.
It SHOULD NOT be emitted after a previous <code>close</code> event.</p>
<p>After the stream is closed, it MUST switch to non-readable mode,
see also <code>isReadable()</code>.</p>
<p>Unlike the <code>end</code> event, this event SHOULD be emitted whenever the stream
closes, irrespective of whether this happens implicitly due to an
unrecoverable error or explicitly when either side closes the stream.
If you only want to detect a <em>succesful</em> end, you should use the <code>end</code>
event instead.</p>
<p>Many common streams (such as a TCP/IP connection or a file-based stream)
will likely choose to emit this event after reading a <em>successful</em> <code>end</code>
event or after a fatal transmission <code>error</code> event.</p>
<p>If this stream is a <code>DuplexStreamInterface</code>, you should also notice
how the writable side of the stream also implements a <code>close</code> event.
In other words, after receiving this event, the stream MUST switch into
non-writable AND non-readable mode, see also <code>isWritable()</code>.
Note that this event should not be confused with the <code>end</code> event.</p>
<h4>
<a id="isreadable" class="anchor" href="#isreadable" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>isReadable()</h4>
<p>The <code>isReadable(): bool</code> method can be used to
check whether this stream is in a readable state (not closed already).</p>
<p>This method can be used to check if the stream still accepts incoming
data events or if it is ended or closed already.
Once the stream is non-readable, no further <code>data</code> or <code>end</code> events SHOULD
be emitted.</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-c1">assert</span>(<span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span>isReadable() <span class="pl-k">===</span> <span class="pl-c1">false</span>);</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span>on(<span class="pl-s"><span class="pl-pds">'</span>data<span class="pl-pds">'</span></span>, assertNeverCalled());</span>
<span class="pl-s1"><span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span>on(<span class="pl-s"><span class="pl-pds">'</span>end<span class="pl-pds">'</span></span>, assertNeverCalled());</span></pre></div>
<p>A successfully opened stream always MUST start in readable mode.</p>
<p>Once the stream ends or closes, it MUST switch to non-readable mode.
This can happen any time, explicitly through <code>close()</code> or
implicitly due to a remote close or an unrecoverable transmission error.
Once a stream has switched to non-readable mode, it MUST NOT transition
back to readable mode.</p>
<p>If this stream is a <code>DuplexStreamInterface</code>, you should also notice
how the writable side of the stream also implements an <code>isWritable()</code>
method. Unless this is a half-open duplex stream, they SHOULD usually
have the same return value.</p>
<h4>
<a id="pause" class="anchor" href="#pause" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>pause()</h4>
<p>The <code>pause(): void</code> method can be used to
pause reading incoming data events.</p>
<p>Removes the data source file descriptor from the event loop. This
allows you to throttle incoming data.</p>
<p>Unless otherwise noted, a successfully opened stream SHOULD NOT start
in paused state.</p>
<p>Once the stream is paused, no futher <code>data</code> or <code>end</code> events SHOULD
be emitted.</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span>pause();</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span>on(<span class="pl-s"><span class="pl-pds">'</span>data<span class="pl-pds">'</span></span>, assertShouldNeverCalled());</span>
<span class="pl-s1"><span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span>on(<span class="pl-s"><span class="pl-pds">'</span>end<span class="pl-pds">'</span></span>, assertShouldNeverCalled());</span></pre></div>
<p>This method is advisory-only, though generally not recommended, the
stream MAY continue emitting <code>data</code> events.</p>
<p>You can continue processing events by calling <code>resume()</code> again.</p>
<p>Note that both methods can be called any number of times, in particular
calling <code>pause()</code> more than once SHOULD NOT have any effect.</p>
<p>See also <code>resume()</code>.</p>
<h4>
<a id="resume" class="anchor" href="#resume" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>resume()</h4>
<p>The <code>resume(): void</code> method can be used to
resume reading incoming data events.</p>
<p>Re-attach the data source after a previous <code>pause()</code>.</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span>pause();</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$loop</span><span class="pl-k">-&gt;</span>addTimer(<span class="pl-c1">1.0</span>, <span class="pl-k">function</span> () <span class="pl-k">use</span> (<span class="pl-smi">$stream</span>) {</span>
<span class="pl-s1">    <span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span>resume();</span>
<span class="pl-s1">});</span></pre></div>
<p>Note that both methods can be called any number of times, in particular
calling <code>resume()</code> without a prior <code>pause()</code> SHOULD NOT have any effect.</p>
<p>See also <code>pause()</code>.</p>
<h4>
<a id="pipe" class="anchor" href="#pipe" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>pipe()</h4>
<p>The <code>pipe(WritableStreamInterface $dest, array $options = [])</code> method can be used to
pipe all the data from this readable source into the given writable destination.</p>
<p>Automatically sends all incoming data to the destination.
Automatically throttles the source based on what the destination can handle.</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$source</span><span class="pl-k">-&gt;</span>pipe(<span class="pl-smi">$dest</span>);</span></pre></div>
<p>Similarly, you can also pipe an instance implementing <code>DuplexStreamInterface</code>
into itself in order to write back all the data that is received.
This may be a useful feature for a TCP/IP echo service:</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$connection</span><span class="pl-k">-&gt;</span>pipe(<span class="pl-smi">$connection</span>);</span></pre></div>
<p>This method returns the destination stream as-is, which can be used to
set up chains of piped streams:</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$source</span><span class="pl-k">-&gt;</span>pipe(<span class="pl-smi">$decodeGzip</span>)<span class="pl-k">-&gt;</span>pipe(<span class="pl-smi">$filterBadWords</span>)<span class="pl-k">-&gt;</span>pipe(<span class="pl-smi">$dest</span>);</span></pre></div>
<p>By default, this will call <code>end()</code> on the destination stream once the
source stream emits an <code>end</code> event. This can be disabled like this:</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$source</span><span class="pl-k">-&gt;</span>pipe(<span class="pl-smi">$dest</span>, <span class="pl-c1">array</span>(<span class="pl-s"><span class="pl-pds">'</span>end<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">false</span>));</span></pre></div>
<p>Note that this only applies to the <code>end</code> event.
If an <code>error</code> or explicit <code>close</code> event happens on the source stream,
you'll have to manually close the destination stream:</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$source</span><span class="pl-k">-&gt;</span>pipe(<span class="pl-smi">$dest</span>);</span>
<span class="pl-s1"><span class="pl-smi">$source</span><span class="pl-k">-&gt;</span>on(<span class="pl-s"><span class="pl-pds">'</span>close<span class="pl-pds">'</span></span>, <span class="pl-k">function</span> () <span class="pl-k">use</span> (<span class="pl-smi">$dest</span>) {</span>
<span class="pl-s1">    <span class="pl-smi">$dest</span><span class="pl-k">-&gt;</span>end(<span class="pl-s"><span class="pl-pds">'</span>BYE!<span class="pl-pds">'</span></span>);</span>
<span class="pl-s1">});</span></pre></div>
<p>If the source stream is not readable (closed state), then this is a NO-OP.</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$source</span><span class="pl-k">-&gt;</span>close();</span>
<span class="pl-s1"><span class="pl-smi">$source</span><span class="pl-k">-&gt;</span>pipe(<span class="pl-smi">$dest</span>); <span class="pl-c"><span class="pl-c">//</span> NO-OP</span></span></pre></div>
<p>If the destinantion stream is not writable (closed state), then this will simply
throttle (pause) the source stream:</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$dest</span><span class="pl-k">-&gt;</span>close();</span>
<span class="pl-s1"><span class="pl-smi">$source</span><span class="pl-k">-&gt;</span>pipe(<span class="pl-smi">$dest</span>); <span class="pl-c"><span class="pl-c">//</span> calls $source-&gt;pause()</span></span></pre></div>
<p>Similarly, if the destination stream is closed while the pipe is still
active, it will also throttle (pause) the source stream:</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$source</span><span class="pl-k">-&gt;</span>pipe(<span class="pl-smi">$dest</span>);</span>
<span class="pl-s1"><span class="pl-smi">$dest</span><span class="pl-k">-&gt;</span>close(); <span class="pl-c"><span class="pl-c">//</span> calls $source-&gt;pause()</span></span></pre></div>
<p>Once the pipe is set up successfully, the destination stream MUST emit
a <code>pipe</code> event with this source stream an event argument.</p>
<h4>
<a id="close" class="anchor" href="#close" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>close()</h4>
<p>The <code>close(): void</code> method can be used to
close the stream (forcefully).</p>
<p>This method can be used to (forcefully) close the stream.</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span>close();</span></pre></div>
<p>Once the stream is closed, it SHOULD emit a <code>close</code> event.
Note that this event SHOULD NOT be emitted more than once, in particular
if this method is called multiple times.</p>
<p>After calling this method, the stream MUST switch into a non-readable
mode, see also <code>isReadable()</code>.
This means that no further <code>data</code> or <code>end</code> events SHOULD be emitted.</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span>close();</span>
<span class="pl-s1"><span class="pl-c1">assert</span>(<span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span>isReadable() <span class="pl-k">===</span> <span class="pl-c1">false</span>);</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span>on(<span class="pl-s"><span class="pl-pds">'</span>data<span class="pl-pds">'</span></span>, assertNeverCalled());</span>
<span class="pl-s1"><span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span>on(<span class="pl-s"><span class="pl-pds">'</span>end<span class="pl-pds">'</span></span>, assertNeverCalled());</span></pre></div>
<p>If this stream is a <code>DuplexStreamInterface</code>, you should also notice
how the writable side of the stream also implements a <code>close()</code> method.
In other words, after calling this method, the stream MUST switch into
non-writable AND non-readable mode, see also <code>isWritable()</code>.
Note that this method should not be confused with the <code>end()</code> method.</p>
<h3>
<a id="writablestreaminterface" class="anchor" href="#writablestreaminterface" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>WritableStreamInterface</h3>
<p>The <code>WritableStreamInterface</code> is responsible for providing an interface for
write-only streams and the writable side of duplex streams.</p>
<p>Besides defining a few methods, this interface also implements the
<code>EventEmitterInterface</code> which allows you to react to certain events.</p>
<h4>
<a id="drain-event" class="anchor" href="#drain-event" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>drain event</h4>
<p>The <code>drain</code> event will be emitted whenever the write buffer became full
previously and is now ready to accept more data.</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span>on(<span class="pl-s"><span class="pl-pds">'</span>drain<span class="pl-pds">'</span></span>, <span class="pl-k">function</span> () <span class="pl-k">use</span> (<span class="pl-smi">$stream</span>) {</span>
<span class="pl-s1">    <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>Stream is now ready to accept more data<span class="pl-pds">'</span></span>;</span>
<span class="pl-s1">});</span></pre></div>
<p>This event SHOULD be emitted once every time the buffer became full
previously and is now ready to accept more data.
In other words, this event MAY be emitted any number of times, which may
be zero times if the buffer never became full in the first place.
This event SHOULD NOT be emitted if the buffer has not become full
previously.</p>
<p>This event is mostly used internally, see also <code>write()</code> for more details.</p>
<h4>
<a id="pipe-event" class="anchor" href="#pipe-event" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>pipe event</h4>
<p>The <code>pipe</code> event will be emitted whenever a readable stream is <code>pipe()</code>d
into this stream.
The event receives a single <code>ReadableStreamInterface</code> argument for the
source stream.</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span>on(<span class="pl-s"><span class="pl-pds">'</span>pipe<span class="pl-pds">'</span></span>, <span class="pl-k">function</span> (<span class="pl-c1">ReadableStreamInterface</span> <span class="pl-smi">$source</span>) <span class="pl-k">use</span> (<span class="pl-smi">$stream</span>) {</span>
<span class="pl-s1">    <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>Now receiving piped data<span class="pl-pds">'</span></span>;</span>
<span class="pl-s1"></span>
<span class="pl-s1">    <span class="pl-c"><span class="pl-c">//</span> explicitly close target if source emits an error</span></span>
<span class="pl-s1">    <span class="pl-smi">$source</span><span class="pl-k">-&gt;</span>on(<span class="pl-s"><span class="pl-pds">'</span>error<span class="pl-pds">'</span></span>, <span class="pl-k">function</span> () <span class="pl-k">use</span> (<span class="pl-smi">$stream</span>) {</span>
<span class="pl-s1">        <span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span>close();</span>
<span class="pl-s1">    });</span>
<span class="pl-s1">});</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$source</span><span class="pl-k">-&gt;</span>pipe(<span class="pl-smi">$stream</span>);</span></pre></div>
<p>This event MUST be emitted once for each readable stream that is
successfully piped into this destination stream.
In other words, this event MAY be emitted any number of times, which may
be zero times if no stream is ever piped into this stream.
This event MUST NOT be emitted if either the source is not readable
(closed already) or this destination is not writable (closed already).</p>
<p>This event is mostly used internally, see also <code>pipe()</code> for more details.</p>
<h4>
<a id="error-event-1" class="anchor" href="#error-event-1" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>error event</h4>
<p>The <code>error</code> event will be emitted whenever an error occurs, usually while
trying to write to this stream.
The event receives a single <code>Exception</code> argument for the error instance.</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span>on(<span class="pl-s"><span class="pl-pds">'</span>error<span class="pl-pds">'</span></span>, <span class="pl-k">function</span> (<span class="pl-c1">Exception</span> <span class="pl-smi">$e</span>) {</span>
<span class="pl-s1">    <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>Error: <span class="pl-pds">'</span></span> <span class="pl-k">.</span> <span class="pl-smi">$e</span><span class="pl-k">-&gt;</span>getMessage() <span class="pl-k">.</span> <span class="pl-c1">PHP_EOL</span>;</span>
<span class="pl-s1">});</span></pre></div>
<p>This event MAY be emitted any number of times, which should be zero
times if this is a stream that is successfully terminated.
It SHOULD be emitted whenever the stream detects an error, such as a
transmission error.
It SHOULD NOT be emitted after a <code>close</code> event.</p>
<p>Many common streams (such as a TCP/IP connection or a file-based stream)
only deal with data transmission and may choose
to only emit this for a fatal transmission error once and will thus
likely close (terminate) the stream in response.
If this is a fatal error that results in the stream being closed, it
SHOULD be followed by a <code>close</code> event.</p>
<p>Other higher-level protocols may choose to keep the stream alive after
this event, if they can recover from an error condition.</p>
<p>If this stream is a <code>DuplexStreamInterface</code>, you should also notice
how the readable side of the stream also implements an <code>error</code> event.
In other words, an error may occur while either reading or writing the
stream which should result in the same error processing.</p>
<h4>
<a id="close-event-1" class="anchor" href="#close-event-1" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>close event</h4>
<p>The <code>close</code> event will be emitted once the stream closes (terminates).</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span>on(<span class="pl-s"><span class="pl-pds">'</span>close<span class="pl-pds">'</span></span>, <span class="pl-k">function</span> () {</span>
<span class="pl-s1">    <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>CLOSED<span class="pl-pds">'</span></span>;</span>
<span class="pl-s1">});</span></pre></div>
<p>This event SHOULD be emitted once or never at all, depending on whether
the stream ever terminates.
It SHOULD NOT be emitted after a previous <code>close</code> event.</p>
<p>After the stream is closed, it MUST switch to non-writable mode,
see also <code>isWritable()</code>.</p>
<p>This event SHOULD be emitted whenever the stream closes, irrespective of
whether this happens implicitly due to an unrecoverable error or
explicitly when either side closes the stream.</p>
<p>Many common streams (such as a TCP/IP connection or a file-based stream)
will likely choose to emit this event after flushing the buffer from
the <code>end()</code> method, after receiving a <em>successful</em> <code>end</code> event or after
a fatal transmission <code>error</code> event.</p>
<p>If this stream is a <code>DuplexStreamInterface</code>, you should also notice
how the readable side of the stream also implements a <code>close</code> event.
In other words, after receiving this event, the stream MUST switch into
non-writable AND non-readable mode, see also <code>isReadable()</code>.
Note that this event should not be confused with the <code>end</code> event.</p>
<h4>
<a id="iswritable" class="anchor" href="#iswritable" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>isWritable()</h4>
<p>The <code>isWritable(): bool</code> method can be used to
check whether this stream is in a writable state (not closed already).</p>
<p>This method can be used to check if the stream still accepts writing
any data or if it is ended or closed already.
Writing any data to a non-writable stream is a NO-OP:</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-c1">assert</span>(<span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span>isWritable() <span class="pl-k">===</span> <span class="pl-c1">false</span>);</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span>write(<span class="pl-s"><span class="pl-pds">'</span>end<span class="pl-pds">'</span></span>); <span class="pl-c"><span class="pl-c">//</span> NO-OP</span></span>
<span class="pl-s1"><span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span>end(<span class="pl-s"><span class="pl-pds">'</span>end<span class="pl-pds">'</span></span>); <span class="pl-c"><span class="pl-c">//</span> NO-OP</span></span></pre></div>
<p>A successfully opened stream always MUST start in writable mode.</p>
<p>Once the stream ends or closes, it MUST switch to non-writable mode.
This can happen any time, explicitly through <code>end()</code> or <code>close()</code> or
implicitly due to a remote close or an unrecoverable transmission error.
Once a stream has switched to non-writable mode, it MUST NOT transition
back to writable mode.</p>
<p>If this stream is a <code>DuplexStreamInterface</code>, you should also notice
how the readable side of the stream also implements an <code>isReadable()</code>
method. Unless this is a half-open duplex stream, they SHOULD usually
have the same return value.</p>
<h4>
<a id="write" class="anchor" href="#write" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>write()</h4>
<p>The <code>write(mixed $data): bool</code> method can be used to
write some data into the stream.</p>
<p>A successful write MUST be confirmed with a boolean <code>true</code>, which means
that either the data was written (flushed) immediately or is buffered and
scheduled for a future write. Note that this interface gives you no
control over explicitly flushing the buffered data, as finding the
appropriate time for this is beyond the scope of this interface and left
up to the implementation of this interface.</p>
<p>Many common streams (such as a TCP/IP connection or file-based stream)
may choose to buffer all given data and schedule a future flush by using
an underlying EventLoop to check when the resource is actually writable.</p>
<p>If a stream cannot handle writing (or flushing) the data, it SHOULD emit
an <code>error</code> event and MAY <code>close()</code> the stream if it can not recover from
this error.</p>
<p>If the internal buffer is full after adding <code>$data</code>, then <code>write()</code>
SHOULD return <code>false</code>, indicating that the caller should stop sending
data until the buffer drains.
The stream SHOULD send a <code>drain</code> event once the buffer is ready to accept
more data.</p>
<p>Similarly, if the the stream is not writable (already in a closed state)
it MUST NOT process the given <code>$data</code> and SHOULD return <code>false</code>,
indicating that the caller should stop sending data.</p>
<p>The given <code>$data</code> argument MAY be of mixed type, but it's usually
recommended it SHOULD be a <code>string</code> value or MAY use a type that allows
representation as a <code>string</code> for maximum compatibility.</p>
<p>Many common streams (such as a TCP/IP connection or a file-based stream)
will only accept the raw (binary) payload data that is transferred over
the wire as chunks of <code>string</code> values.</p>
<p>Due to the stream-based nature of this, the sender may send any number
of chunks with varying sizes. There are no guarantees that these chunks
will be received with the exact same framing the sender intended to send.
In other words, many lower-level protocols (such as TCP/IP) transfer the
data in chunks that may be anywhere between single-byte values to several
dozens of kilobytes. You may want to apply a higher-level protocol to
these low-level data chunks in order to achieve proper message framing.</p>
<h4>
<a id="end" class="anchor" href="#end" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>end()</h4>
<p>The <code>end(mixed $data = null): void</code> method can be used to
successfully end the stream (after optionally sending some final data).</p>
<p>This method can be used to successfully end the stream, i.e. close
the stream after sending out all data that is currently buffered.</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span>write(<span class="pl-s"><span class="pl-pds">'</span>hello<span class="pl-pds">'</span></span>);</span>
<span class="pl-s1"><span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span>write(<span class="pl-s"><span class="pl-pds">'</span>world<span class="pl-pds">'</span></span>);</span>
<span class="pl-s1"><span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span>end();</span></pre></div>
<p>If there's no data currently buffered and nothing to be flushed, then
this method MAY <code>close()</code> the stream immediately.</p>
<p>If there's still data in the buffer that needs to be flushed first, then
this method SHOULD try to write out this data and only then <code>close()</code>
the stream.
Once the stream is closed, it SHOULD emit a <code>close</code> event.</p>
<p>Note that this interface gives you no control over explicitly flushing
the buffered data, as finding the appropriate time for this is beyond the
scope of this interface and left up to the implementation of this
interface.</p>
<p>Many common streams (such as a TCP/IP connection or file-based stream)
may choose to buffer all given data and schedule a future flush by using
an underlying EventLoop to check when the resource is actually writable.</p>
<p>You can optionally pass some final data that is written to the stream
before ending the stream. If a non-<code>null</code> value is given as <code>$data</code>, then
this method will behave just like calling <code>write($data)</code> before ending
with no data.</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-c"><span class="pl-c">//</span> shorter version</span></span>
<span class="pl-s1"><span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span>end(<span class="pl-s"><span class="pl-pds">'</span>bye<span class="pl-pds">'</span></span>);</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-c"><span class="pl-c">//</span> same as longer version</span></span>
<span class="pl-s1"><span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span>write(<span class="pl-s"><span class="pl-pds">'</span>bye<span class="pl-pds">'</span></span>);</span>
<span class="pl-s1"><span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span>end();</span></pre></div>
<p>After calling this method, the stream MUST switch into a non-writable
mode, see also <code>isWritable()</code>.
This means that no further writes are possible, so any additional
<code>write()</code> or <code>end()</code> calls have no effect.</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span>end();</span>
<span class="pl-s1"><span class="pl-c1">assert</span>(<span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span>isWritable() <span class="pl-k">===</span> <span class="pl-c1">false</span>);</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span>write(<span class="pl-s"><span class="pl-pds">'</span>nope<span class="pl-pds">'</span></span>); <span class="pl-c"><span class="pl-c">//</span> NO-OP</span></span>
<span class="pl-s1"><span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span>end(); <span class="pl-c"><span class="pl-c">//</span> NO-OP</span></span></pre></div>
<p>If this stream is a <code>DuplexStreamInterface</code>, calling this method SHOULD
also end its readable side, unless the stream supports half-open mode.
In other words, after calling this method, these streams SHOULD switch
into non-writable AND non-readable mode, see also <code>isReadable()</code>.
This implies that in this case, the stream SHOULD NOT emit any <code>data</code>
or <code>end</code> events anymore.
Streams MAY choose to use the <code>pause()</code> method logic for this, but
special care may have to be taken to ensure a following call to the
<code>resume()</code> method SHOULD NOT continue emitting readable events.</p>
<p>Note that this method should not be confused with the <code>close()</code> method.</p>
<h4>
<a id="close-1" class="anchor" href="#close-1" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>close()</h4>
<p>The <code>close(): void</code> method can be used to
close the stream (forcefully).</p>
<p>This method can be used to forcefully close the stream, i.e. close
the stream without waiting for any buffered data to be flushed.
If there's still data in the buffer, this data SHOULD be discarded.</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span>close();</span></pre></div>
<p>Once the stream is closed, it SHOULD emit a <code>close</code> event.
Note that this event SHOULD NOT be emitted more than once, in particular
if this method is called multiple times.</p>
<p>After calling this method, the stream MUST switch into a non-writable
mode, see also <code>isWritable()</code>.
This means that no further writes are possible, so any additional
<code>write()</code> or <code>end()</code> calls have no effect.</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span>close();</span>
<span class="pl-s1"><span class="pl-c1">assert</span>(<span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span>isWritable() <span class="pl-k">===</span> <span class="pl-c1">false</span>);</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span>write(<span class="pl-s"><span class="pl-pds">'</span>nope<span class="pl-pds">'</span></span>); <span class="pl-c"><span class="pl-c">//</span> NO-OP</span></span>
<span class="pl-s1"><span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span>end(); <span class="pl-c"><span class="pl-c">//</span> NO-OP</span></span></pre></div>
<p>Note that this method should not be confused with the <code>end()</code> method.
Unlike the <code>end()</code> method, this method does not take care of any existing
buffers and simply discards any buffer contents.
Likewise, this method may also be called after calling <code>end()</code> on a
stream in order to stop waiting for the stream to flush its final data.</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span>end();</span>
<span class="pl-s1"><span class="pl-smi">$loop</span><span class="pl-k">-&gt;</span>addTimer(<span class="pl-c1">1.0</span>, <span class="pl-k">function</span> () <span class="pl-k">use</span> (<span class="pl-smi">$stream</span>) {</span>
<span class="pl-s1">    <span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span>close();</span>
<span class="pl-s1">});</span></pre></div>
<p>If this stream is a <code>DuplexStreamInterface</code>, you should also notice
how the readable side of the stream also implements a <code>close()</code> method.
In other words, after calling this method, the stream MUST switch into
non-writable AND non-readable mode, see also <code>isReadable()</code>.</p>
<h3>
<a id="duplexstreaminterface" class="anchor" href="#duplexstreaminterface" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>DuplexStreamInterface</h3>
<p>The <code>DuplexStreamInterface</code> is responsible for providing an interface for
duplex streams (both readable and writable).</p>
<p>It builds on top of the existing interfaces for readable and writable streams
and follows the exact same method and event semantics.
If you're new to this concept, you should look into the
<code>ReadableStreamInterface</code> and <code>WritableStreamInterface</code> first.</p>
<p>Besides defining a few methods, this interface also implements the
<code>EventEmitterInterface</code> which allows you to react to the same events defined
on the <code>ReadbleStreamInterface</code> and <code>WritableStreamInterface</code>.</p>
<p>See also <a href="#readablestreaminterface"><code>ReadableStreamInterface</code></a> and
<a href="#writablestreaminterface"><code>WritableStreamInterface</code></a> for more details.</p>
<h3>
<a id="readableresourcestream" class="anchor" href="#readableresourcestream" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>ReadableResourceStream</h3>
<p>The <code>ReadableResourceStream</code> is a concrete implementation of the
<a href="#readablestreaminterface"><code>ReadableStreamInterface</code></a> for PHP's stream resources.</p>
<p>This can be used to represent a read-only resource like a file stream opened in
readable mode or a stream such as <code>STDIN</code>:</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$stream</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-c1">ReadableResourceStream</span>(<span class="pl-c1">STDIN</span>, <span class="pl-smi">$loop</span>);</span>
<span class="pl-s1"><span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span>on(<span class="pl-s"><span class="pl-pds">'</span>data<span class="pl-pds">'</span></span>, <span class="pl-k">function</span> (<span class="pl-smi">$chunk</span>) {</span>
<span class="pl-s1">    <span class="pl-c1">echo</span> <span class="pl-smi">$chunk</span>;</span>
<span class="pl-s1">});</span>
<span class="pl-s1"><span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span>on(<span class="pl-s"><span class="pl-pds">'</span>end<span class="pl-pds">'</span></span>, <span class="pl-k">function</span> () {</span>
<span class="pl-s1">    <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>END<span class="pl-pds">'</span></span>;</span>
<span class="pl-s1">});</span></pre></div>
<p>See also <a href="#readablestreaminterface"><code>ReadableStreamInterface</code></a> for more details.</p>
<p>The first parameter given to the constructor MUST be a valid stream resource
that is opened in reading mode (e.g. <code>fopen()</code> mode <code>r</code>).
Otherwise, it will throw an <code>InvalidArgumentException</code>:</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-c"><span class="pl-c">//</span> throws InvalidArgumentException</span></span>
<span class="pl-s1"><span class="pl-smi">$stream</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-c1">ReadableResourceStream</span>(<span class="pl-c1">false</span>, <span class="pl-smi">$loop</span>);</span></pre></div>
<p>See also the <a href="#readableresourcestream"><code>DuplexResourceStream</code></a> for read-and-write
stream resources otherwise.</p>
<p>Internally, this class tries to enable non-blocking mode on the stream resource
which may not be supported for all stream resources.
Most notably, this is not supported by pipes on Windows (STDIN etc.).
If this fails, it will throw a <code>RuntimeException</code>:</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-c"><span class="pl-c">//</span> throws RuntimeException on Windows</span></span>
<span class="pl-s1"><span class="pl-smi">$stream</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-c1">ReadableResourceStream</span>(<span class="pl-c1">STDIN</span>, <span class="pl-smi">$loop</span>);</span></pre></div>
<p>Once the constructor is called with a valid stream resource, this class will
take care of the underlying stream resource.
You SHOULD only use its public API and SHOULD NOT interfere with the underlying
stream resource manually.
Should you need to access the underlying stream resource, you can use the public
<code>$stream</code> property like this:</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-c1">var_dump</span>(<span class="pl-c1">stream_get_meta_data</span>(<span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span><span class="pl-smi">stream</span>));</span></pre></div>
<p>The <code>$bufferSize</code> property controls the maximum buffer size in bytes to read
at once from the stream.
This value SHOULD NOT be changed unless you know what you're doing.
This can be a positive number which means that up to X bytes will be read
at once from the underlying stream resource. Note that the actual number
of bytes read may be lower if the stream resource has less than X bytes
currently available.
This can be <code>null</code> which means "read everything available" from the
underlying stream resource.
This should read until the stream resource is not readable anymore
(i.e. underlying buffer drained), note that this does not neccessarily
mean it reached EOF.</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span><span class="pl-smi">bufferSize</span> <span class="pl-k">=</span> <span class="pl-c1">8192</span>;</span></pre></div>
<h3>
<a id="writableresourcestream" class="anchor" href="#writableresourcestream" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>WritableResourceStream</h3>
<p>The <code>WritableResourceStream</code> is a concrete implementation of the
<a href="#writablestreaminterface"><code>WritableStreamInterface</code></a> for PHP's stream resources.</p>
<p>This can be used to represent a write-only resource like a file stream opened in
writable mode or a stream such as <code>STDOUT</code> or <code>STDERR</code>:</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$stream</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-c1">WritableResourceStream</span>(<span class="pl-c1">STDOUT</span>, <span class="pl-smi">$loop</span>);</span>
<span class="pl-s1"><span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span>write(<span class="pl-s"><span class="pl-pds">'</span>hello!<span class="pl-pds">'</span></span>);</span>
<span class="pl-s1"><span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span>end();</span></pre></div>
<p>See also <a href="#writablestreaminterface"><code>WritableStreamInterface</code></a> for more details.</p>
<p>The first parameter given to the constructor MUST be a valid stream resource
that is opened for writing.
Otherwise, it will throw an <code>InvalidArgumentException</code>:</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-c"><span class="pl-c">//</span> throws InvalidArgumentException</span></span>
<span class="pl-s1"><span class="pl-smi">$stream</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-c1">WritableResourceStream</span>(<span class="pl-c1">false</span>, <span class="pl-smi">$loop</span>);</span></pre></div>
<p>See also the <a href="#readableresourcestream"><code>DuplexResourceStream</code></a> for read-and-write
stream resources otherwise.</p>
<p>Internally, this class tries to enable non-blocking mode on the stream resource
which may not be supported for all stream resources.
Most notably, this is not supported by pipes on Windows (STDOUT, STDERR etc.).
If this fails, it will throw a <code>RuntimeException</code>:</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-c"><span class="pl-c">//</span> throws RuntimeException on Windows</span></span>
<span class="pl-s1"><span class="pl-smi">$stream</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-c1">WritableResourceStream</span>(<span class="pl-c1">STDOUT</span>, <span class="pl-smi">$loop</span>);</span></pre></div>
<p>Once the constructor is called with a valid stream resource, this class will
take care of the underlying stream resource.
You SHOULD only use its public API and SHOULD NOT interfere with the underlying
stream resource manually.
Should you need to access the underlying stream resource, you can use the public
<code>$stream</code> property like this:</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-c1">var_dump</span>(<span class="pl-c1">stream_get_meta_data</span>(<span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span><span class="pl-smi">stream</span>));</span></pre></div>
<p>Any <code>write()</code> calls to this class will not be performaned instantly, but will
be performaned asynchronously, once the EventLoop reports the stream resource is
ready to accept data.
For this, it uses an in-memory buffer string to collect all outstanding writes.
This buffer has a soft-limit applied which defines how much data it is willing
to accept before the caller SHOULD stop sending further data.
It currently defaults to 64 KiB and can be controlled through the public
<code>$softLimit</code> property like this:</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span><span class="pl-smi">softLimit</span> <span class="pl-k">=</span> <span class="pl-c1">8192</span>;</span></pre></div>
<p>See also <a href="#write"><code>write()</code></a> for more details.</p>
<h3>
<a id="duplexresourcestream" class="anchor" href="#duplexresourcestream" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>DuplexResourceStream</h3>
<p>The <code>DuplexResourceStream</code> is a concrete implementation of the
<a href="#duplexstreaminterface"><code>DuplexStreamInterface</code></a> for PHP's stream resources.</p>
<p>This can be used to represent a read-and-write resource like a file stream opened
in read and write mode mode or a stream such as a TCP/IP connection:</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$conn</span> <span class="pl-k">=</span> <span class="pl-c1">stream_socket_client</span>(<span class="pl-s"><span class="pl-pds">'</span>tcp://google.com:80<span class="pl-pds">'</span></span>);</span>
<span class="pl-s1"><span class="pl-smi">$stream</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-c1">DuplexResourceStream</span>(<span class="pl-smi">$conn</span>, <span class="pl-smi">$loop</span>);</span>
<span class="pl-s1"><span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span>write(<span class="pl-s"><span class="pl-pds">'</span>hello!<span class="pl-pds">'</span></span>);</span>
<span class="pl-s1"><span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span>end();</span></pre></div>
<p>See also <a href="#duplexstreaminterface"><code>DuplexStreamInterface</code></a> for more details.</p>
<p>The first parameter given to the constructor MUST be a valid stream resource
that is opened for reading <em>and</em> writing.
Otherwise, it will throw an <code>InvalidArgumentException</code>:</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-c"><span class="pl-c">//</span> throws InvalidArgumentException</span></span>
<span class="pl-s1"><span class="pl-smi">$stream</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-c1">DuplexResourceStream</span>(<span class="pl-c1">false</span>, <span class="pl-smi">$loop</span>);</span></pre></div>
<p>See also the <a href="#readableresourcestream"><code>ReadableResourceStream</code></a> for read-only
and the <a href="#writableresourcestream"><code>WritableResourceStream</code></a> for write-only
stream resources otherwise.</p>
<p>Internally, this class tries to enable non-blocking mode on the stream resource
which may not be supported for all stream resources.
Most notably, this is not supported by pipes on Windows (STDOUT, STDERR etc.).
If this fails, it will throw a <code>RuntimeException</code>:</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-c"><span class="pl-c">//</span> throws RuntimeException on Windows</span></span>
<span class="pl-s1"><span class="pl-smi">$stream</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-c1">DuplexResourceStream</span>(<span class="pl-c1">STDOUT</span>, <span class="pl-smi">$loop</span>);</span></pre></div>
<p>Once the constructor is called with a valid stream resource, this class will
take care of the underlying stream resource.
You SHOULD only use its public API and SHOULD NOT interfere with the underlying
stream resource manually.
Should you need to access the underlying stream resource, you can use the public
<code>$stream</code> property like this:</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-c1">var_dump</span>(<span class="pl-c1">stream_get_meta_data</span>(<span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span><span class="pl-smi">stream</span>));</span></pre></div>
<p>The <code>$bufferSize</code> property controls the maximum buffer size in bytes to read
at once from the stream.
This value SHOULD NOT be changed unless you know what you're doing.
This can be a positive number which means that up to X bytes will be read
at once from the underlying stream resource. Note that the actual number
of bytes read may be lower if the stream resource has less than X bytes
currently available.
This can be <code>null</code> which means "read everything available" from the
underlying stream resource.
This should read until the stream resource is not readable anymore
(i.e. underlying buffer drained), note that this does not neccessarily
mean it reached EOF.</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span><span class="pl-smi">bufferSize</span> <span class="pl-k">=</span> <span class="pl-c1">8192</span>;</span></pre></div>
<p>Any <code>write()</code> calls to this class will not be performaned instantly, but will
be performaned asynchronously, once the EventLoop reports the stream resource is
ready to accept data.
For this, it uses an in-memory buffer string to collect all outstanding writes.
This buffer has a soft-limit applied which defines how much data it is willing
to accept before the caller SHOULD stop sending further data.
It currently defaults to 64 KiB and can be controlled through the public
<code>$softLimit</code> property like this:</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$buffer</span> <span class="pl-k">=</span> <span class="pl-smi">$stream</span><span class="pl-k">-&gt;</span>getBuffer();</span>
<span class="pl-s1"><span class="pl-smi">$buffer</span><span class="pl-k">-&gt;</span><span class="pl-smi">softLimit</span> <span class="pl-k">=</span> <span class="pl-c1">8192</span>;</span></pre></div>
<p>See also <a href="#write"><code>write()</code></a> for more details.</p>
<blockquote>
<p>BC note: This class was previously called <code>Stream</code>.
The <code>Stream</code> class still exists for BC reasons and will be removed in future
versions of this package.</p>
</blockquote>
<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Usage</h2>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1">    <span class="pl-smi">$loop</span> <span class="pl-k">=</span> <span class="pl-c1">React\EventLoop\</span><span class="pl-c1">Factory</span><span class="pl-k">::</span>create();</span>
<span class="pl-s1"></span>
<span class="pl-s1">    <span class="pl-smi">$source</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-c1">React\Stream\</span><span class="pl-c1">ReadableResourceStream</span>(<span class="pl-c1">fopen</span>(<span class="pl-s"><span class="pl-pds">'</span>omg.txt<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>r<span class="pl-pds">'</span></span>), <span class="pl-smi">$loop</span>);</span>
<span class="pl-s1">    <span class="pl-smi">$dest</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-c1">React\Stream\</span><span class="pl-c1">WritableResourceStream</span>(<span class="pl-c1">fopen</span>(<span class="pl-s"><span class="pl-pds">'</span>wtf.txt<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>w<span class="pl-pds">'</span></span>), <span class="pl-smi">$loop</span>);</span>
<span class="pl-s1"></span>
<span class="pl-s1">    <span class="pl-smi">$source</span><span class="pl-k">-&gt;</span>pipe(<span class="pl-smi">$dest</span>);</span>
<span class="pl-s1"></span>
<span class="pl-s1">    <span class="pl-smi">$loop</span><span class="pl-k">-&gt;</span>run();</span></pre></div>
<h2>
<a id="install" class="anchor" href="#install" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Install</h2>
<p>The recommended way to install this library is <a href="http://getcomposer.org">through Composer</a>.
<a href="http://getcomposer.org/doc/00-intro.md">New to Composer?</a></p>
<p>This will install the latest supported version:</p>
<div class="highlight highlight-source-shell"><pre>$ composer require react/stream:^0.6</pre></div>
<p>More details about version upgrades can be found in the <a href="changelog.html">CHANGELOG</a>.</p>
<h2>
<a id="tests" class="anchor" href="#tests" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Tests</h2>
<p>To run the test suite, you first need to clone this repo and then install all
dependencies <a href="http://getcomposer.org">through Composer</a>:</p>
<div class="highlight highlight-source-shell"><pre>$ composer install</pre></div>
<p>To run the test suite, go to the project root and run:</p>
<div class="highlight highlight-source-shell"><pre>$ php vendor/bin/phpunit</pre></div>
<h2>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>License</h2>
<p>MIT, see <a href="license.html">LICENSE file</a>.</p>
            </main>
            <aside class="sidebar" role="complementary">
                <section class="component-info">
                    <h2 class="component-info__title">
                        <a href="../../stream/v0.6.0/">Stream</a>

                        <div class="version-selector">
                            <button class="version-selector__button" aria-expanded="false" aria-controls="component-version-selector" data-version-selector-toggle>
                                v0.6.0

                                <i class="icon-chevron-down" aria-hidden="true"></i>
                                <i class="icon-chevron-up" aria-hidden="true"></i>
                            </button>

                            <div id="component-version-selector" class="version-selector__panel" aria-hidden="true">
                                <ul class="version-selector__list">
                                                                    <li>
                                        <a href="../../stream/v0.7.3/" class="version-selector__version version-selector__version--latest">
                                            v0.7.3
                                        </a>
                                    </li>
                                                                    <li>
                                        <a href="../../stream/v0.7.2/" class="version-selector__version">
                                            v0.7.2
                                        </a>
                                    </li>
                                                                    <li>
                                        <a href="../../stream/v0.7.1/" class="version-selector__version">
                                            v0.7.1
                                        </a>
                                    </li>
                                                                    <li>
                                        <a href="../../stream/v0.7.0/" class="version-selector__version">
                                            v0.7.0
                                        </a>
                                    </li>
                                                                    <li>
                                        <a href="../../stream/v0.6.0/" class="version-selector__version version-selector__version--selected">
                                            v0.6.0
                                        </a>
                                    </li>
                                                                    <li>
                                        <a href="../../stream/v0.5.0/" class="version-selector__version">
                                            v0.5.0
                                        </a>
                                    </li>
                                                                    <li>
                                        <a href="../../stream/v0.4.6/" class="version-selector__version">
                                            v0.4.6
                                        </a>
                                    </li>
                                                                    <li>
                                        <a href="../../stream/v0.4.5/" class="version-selector__version">
                                            v0.4.5
                                        </a>
                                    </li>
                                                                    <li>
                                        <a href="../../stream/v0.4.4/" class="version-selector__version">
                                            v0.4.4
                                        </a>
                                    </li>
                                                                    <li>
                                        <a href="../../stream/v0.4.3/" class="version-selector__version">
                                            v0.4.3
                                        </a>
                                    </li>
                                                                    <li>
                                        <a href="../../stream/v0.4.2/" class="version-selector__version">
                                            v0.4.2
                                        </a>
                                    </li>
                                                                    <li>
                                        <a href="../../stream/v0.4.1/" class="version-selector__version">
                                            v0.4.1
                                        </a>
                                    </li>
                                                                    <li>
                                        <a href="../../stream/v0.4.0/" class="version-selector__version">
                                            v0.4.0
                                        </a>
                                    </li>
                                                                    <li>
                                        <a href="../../stream/v0.3.4/" class="version-selector__version">
                                            v0.3.4
                                        </a>
                                    </li>
                                                                    <li>
                                        <a href="../../stream/v0.3.3/" class="version-selector__version">
                                            v0.3.3
                                        </a>
                                    </li>
                                                                    <li>
                                        <a href="../../stream/v0.3.2/" class="version-selector__version">
                                            v0.3.2
                                        </a>
                                    </li>
                                                                    <li>
                                        <a href="../../stream/v0.3.1/" class="version-selector__version">
                                            v0.3.1
                                        </a>
                                    </li>
                                                                    <li>
                                        <a href="../../stream/v0.3.0/" class="version-selector__version">
                                            v0.3.0
                                        </a>
                                    </li>
                                                                    <li>
                                        <a href="../../stream/v0.2.6/" class="version-selector__version">
                                            v0.2.6
                                        </a>
                                    </li>
                                                                    <li>
                                        <a href="../../stream/v0.2.5/" class="version-selector__version">
                                            v0.2.5
                                        </a>
                                    </li>
                                                                    <li>
                                        <a href="../../stream/v0.2.4/" class="version-selector__version">
                                            v0.2.4
                                        </a>
                                    </li>
                                                                    <li>
                                        <a href="../../stream/v0.2.3/" class="version-selector__version">
                                            v0.2.3
                                        </a>
                                    </li>
                                                                    <li>
                                        <a href="../../stream/v0.2.2/" class="version-selector__version">
                                            v0.2.2
                                        </a>
                                    </li>
                                                                    <li>
                                        <a href="../../stream/v0.2.1/" class="version-selector__version">
                                            v0.2.1
                                        </a>
                                    </li>
                                                                    <li>
                                        <a href="../../stream/v0.2.0/" class="version-selector__version">
                                            v0.2.0
                                        </a>
                                    </li>
                                                                    <li>
                                        <a href="../../stream/v0.1.1/" class="version-selector__version">
                                            v0.1.1
                                        </a>
                                    </li>
                                                                    <li>
                                        <a href="../../stream/v0.1.0/" class="version-selector__version">
                                            v0.1.0
                                        </a>
                                    </li>
                                                                    <li>
                                        <a href="../../stream/master/" class="version-selector__version version-selector__version--dev">
                                            master
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </h2>

                    <ul class="component-info__info">
                        <li>
                            <a href="https://github.com/reactphp/stream">
                                <i class="icon-github" aria-hidden="true"></i> reactphp/stream
                            </a>
                        </li>
                        <li>
                            <a href="license.html">
                                <i class="icon-law" aria-hidden="true"></i> MIT License
                            </a>
                        </li>
                    </ul>

                    <h3 class="component-info__subtitle">Installation</h3>

                    <div class="highlight highlight-source-shell"><pre>composer require react/stream:^0.6.0</pre></div>

                    <h3 class="component-info__subtitle">Contributors</h3>

                    <ul class="component-info__contributors">
                                            <li>
                            <a href="https://github.com/clue">
                                <img src="https://avatars1.githubusercontent.com/u/776829?v=4&amp;s=40" srcset="https://avatars1.githubusercontent.com/u/776829?v=4&amp;s=80 2x" alt="clue" title="clue (139 contributions)">
                            </a>
                        </li>
                                            <li>
                            <a href="https://github.com/igorw">
                                <img src="https://avatars2.githubusercontent.com/u/88061?v=4&amp;s=40" srcset="https://avatars2.githubusercontent.com/u/88061?v=4&amp;s=80 2x" alt="igorw" title="igorw (43 contributions)">
                            </a>
                        </li>
                                            <li>
                            <a href="https://github.com/cboden">
                                <img src="https://avatars0.githubusercontent.com/u/617694?v=4&amp;s=40" srcset="https://avatars0.githubusercontent.com/u/617694?v=4&amp;s=80 2x" alt="cboden" title="cboden (43 contributions)">
                            </a>
                        </li>
                                            <li>
                            <a href="https://github.com/WyriHaximus">
                                <img src="https://avatars2.githubusercontent.com/u/147145?v=4&amp;s=40" srcset="https://avatars2.githubusercontent.com/u/147145?v=4&amp;s=80 2x" alt="WyriHaximus" title="WyriHaximus (35 contributions)">
                            </a>
                        </li>
                                            <li>
                            <a href="https://github.com/jsor">
                                <img src="https://avatars2.githubusercontent.com/u/55574?v=4&amp;s=40" srcset="https://avatars2.githubusercontent.com/u/55574?v=4&amp;s=80 2x" alt="jsor" title="jsor (5 contribution)">
                            </a>
                        </li>
                                            <li>
                            <a href="https://github.com/steverhoades">
                                <img src="https://avatars0.githubusercontent.com/u/1146668?v=4&amp;s=40" srcset="https://avatars0.githubusercontent.com/u/1146668?v=4&amp;s=80 2x" alt="steverhoades" title="steverhoades (4 contribution)">
                            </a>
                        </li>
                                            <li>
                            <a href="https://github.com/arnaud-lb">
                                <img src="https://avatars3.githubusercontent.com/u/365207?v=4&amp;s=40" srcset="https://avatars3.githubusercontent.com/u/365207?v=4&amp;s=80 2x" alt="arnaud-lb" title="arnaud-lb (3 contribution)">
                            </a>
                        </li>
                                            <li>
                            <a href="https://github.com/lysenkobv">
                                <img src="https://avatars3.githubusercontent.com/u/1250142?v=4&amp;s=40" srcset="https://avatars3.githubusercontent.com/u/1250142?v=4&amp;s=80 2x" alt="lysenkobv" title="lysenkobv (3 contribution)">
                            </a>
                        </li>
                                            <li>
                            <a href="https://github.com/jmalloc">
                                <img src="https://avatars3.githubusercontent.com/u/761536?v=4&amp;s=40" srcset="https://avatars3.githubusercontent.com/u/761536?v=4&amp;s=80 2x" alt="jmalloc" title="jmalloc (2 contribution)">
                            </a>
                        </li>
                                            <li>
                            <a href="https://github.com/nawarian">
                                <img src="https://avatars2.githubusercontent.com/u/3905582?v=4&amp;s=40" srcset="https://avatars2.githubusercontent.com/u/3905582?v=4&amp;s=80 2x" alt="nawarian" title="nawarian (2 contribution)">
                            </a>
                        </li>
                                            <li>
                            <a href="https://github.com/pulyavin">
                                <img src="https://avatars3.githubusercontent.com/u/9364583?v=4&amp;s=40" srcset="https://avatars3.githubusercontent.com/u/9364583?v=4&amp;s=80 2x" alt="pulyavin" title="pulyavin (1 contribution)">
                            </a>
                        </li>
                                            <li>
                            <a href="https://github.com/DaveRandom">
                                <img src="https://avatars1.githubusercontent.com/u/2396425?v=4&amp;s=40" srcset="https://avatars1.githubusercontent.com/u/2396425?v=4&amp;s=80 2x" alt="DaveRandom" title="DaveRandom (1 contribution)">
                            </a>
                        </li>
                                        </ul>

                    <h3 class="component-info__subtitle">Activity</h3>

                    <div class="component-info__participation">
                        <svg width="320" height="42">
    <defs>
        <linearGradient id="reactphp-stream-participation-gradient" x1="0" x2="0" y1="1" y2="0">
            <stop offset="10%" stop-color="#40a977"></stop>
            <stop offset="90%" stop-color="#ba3525"></stop>
        </linearGradient>
        <mask id="reactphp-stream-participation-sparkline" x="0" y="0" width="320" height="40" >
            <polyline 
                transform="translate(0, 40) scale(1,-1)"
                points="0,1 6,1 12,2 18,1 24,1 30,6 36,3 42,1 48,1 54,1 60,1 66,1 72,1 78,1 84,1 90,3 96,3 102,1 108,1 114,4 120,2 126,5 132,40 138,5 144,5 150,10 156,1 162,1 168,1 174,16 180,26 186,1 192,1 198,6 204,1 210,1 216,5 222,1 228,2 234,1 240,1 246,1 252,4 258,2 264,5 270,2 276,1 282,1 288,1 294,1 300,1 306,1" 
                fill="transparent" 
                stroke="#40a977" 
                stroke-width="2"
            >
        </mask>
    </defs>

    <g transform="translate(0, -1.5)">
        <rect 
            x="0" 
            y="-2" 
            width="320" 
            height="42"
            style="stroke:none;fill:url(#reactphp-stream-participation-gradient);mask:url(#reactphp-stream-participation-sparkline)"
        ></rect>
    </g>
</svg>
                    </div>
                </section>
            </aside>
        </div>
    </div>

            <footer class="footer">
            <div class="wrapper">
                <ul class="links">
                    <li><a href="https://github.com/reactphp"><i class="icon-github" aria-hidden="true"></i> GitHub</a></li>
                    <li><a href="https://twitter.com/reactphp"><i class="icon-twitter" aria-hidden="true"></i> Twitter</a></li>
                    <li><a href="irc://irc.freenode.net/reactphp"><i class="icon-hash" aria-hidden="true"></i> IRC</a></li>
                </ul>
            </div>
        </footer>
    
    <script async src="../../assets/main.da37b1b115bc22e1c461.js"></script>
    </body>
</html>
