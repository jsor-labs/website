<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <title>Dns Component - ReactPHP</title>

        <meta name="description" content="Event-driven, non-blocking I/O with PHP.">

        <link rel="apple-touch-icon" sizes="180x180" href="https://jsor-labs.github.io/website/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="https://jsor-labs.github.io/website/favicon-32x32.png">
        <link rel="manifest" href="https://jsor-labs.github.io/website/manifest.json">
        <link rel="mask-icon" href="https://jsor-labs.github.io/website/safari-pinned-tab.svg" color="#4f5b93">
        <meta name="apple-mobile-web-app-title" content="ReactPHP">
        <meta name="application-name" content="ReactPHP">
        <meta name="theme-color" content="#f4f3f1">
        <meta name="msapplication-config" content="https://jsor-labs.github.io/website/browserconfig.xml" />

        <meta property="og:image" content="https://jsor-labs.github.io/website/og-image.png">

            <script>window.__assets = '../assets/';</script>

        <link rel="preload" href="../assets/19ca4d35c8f94db0fa14422334dd2ad3.woff" as="font" type="font/woff" crossorigin>
        <link rel="preload" href="../assets/be4ba3dd17008135675e945b630be8f6.woff" as="font" type="font/woff" crossorigin>

        <style>@font-face{font-family:Source Sans Pro;font-style:normal;font-weight:400;font-display:swap;src:local("Source Sans Pro Regular"),local("SourceSansPro-Regular"),url(../assets/19ca4d35c8f94db0fa14422334dd2ad3.woff) format("woff")}@font-face{font-family:Source Sans Pro;font-style:normal;font-weight:700;font-display:swap;src:local("Source Sans Pro Bold"),local("SourceSansPro-Bold"),url(../assets/be4ba3dd17008135675e945b630be8f6.woff) format("woff")}html{box-sizing:border-box}*,:after,:before{box-sizing:inherit}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif;font-size:16px;line-height:1.5;color:#584b4f;background-color:#fff}blockquote,fieldset,form,h1,h2,h3,h4,h5,h6,hr,ol,p,ul{margin:0 0 16px}ul{margin-bottom:0}hr{clear:both;height:0;border:0;border-bottom:1px dashed #eae8e3;padding:0}h1,h2,h3,h4,h5,h6{line-height:1;-webkit-font-smoothing:antialiased;color:#584b4f;font-family:Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-weight:700}h1{font-size:2.4em;margin-bottom:32px;color:#4f5b93;letter-spacing:-1px}h1:not(:first-child){margin-top:32px}h2{font-size:1.8em;margin-bottom:32px}h2:not(:first-child){margin-top:32px}h3{font-size:1.4em;margin-bottom:24px;color:#4f5b93}h3:not(:first-child){margin-top:24px}h4{font-size:1.2em}h4:not(:first-child){margin-top:24px}@media (max-width:768px){h1{font-size:1.8em}h2{font-size:1.6em;margin-bottom:32px}}.container{padding:32px}@media (max-width:768px){.container{padding:16px}}.wrapper{max-width:960px;margin:auto}.wrapper--wide{max-width:1280px}.wrapper--narrow{max-width:640px}.grid{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:102%;margin-left:-2%}.grid,.grid>*{display:-webkit-box;display:-ms-flexbox;display:flex}.grid>*{-webkit-box-flex:1;-ms-flex:1 1 0px;flex:1 1 0;margin-left:2%;max-width:100%}.grid--4cols>*{-ms-flex-preferred-size:23%;flex-basis:23%}.grid--3cols>*{-ms-flex-preferred-size:31.33%;flex-basis:31.33%}.grid--2cols>*{-ms-flex-preferred-size:48%;flex-basis:48%}@media (max-width:768px){.grid{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.grid>*{width:100%;-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto}}.header{width:100%;border-bottom:1px dashed #eae8e3;padding:16px 32px}@media (max-width:768px){.header{padding:16px;margin-bottom:16px}}.header .wrapper{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.header__logo{display:block;line-height:1}.header__logo svg{display:block;height:16px;width:auto}.header__search{margin:0;position:absolute;right:0;z-index:999}.header__search input{width:320px}@media (max-width:768px){.header__search input{width:calc(100vw - 32px)}}.searchbox{width:100%}.searchbox,.searchbox:focus{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:4px 8px 4px 32px;font-size:16px;line-height:24px;color:#584b4f;border:1px solid #eae8e3}.searchbox--collapsed:not(:focus){background-color:transparent;border-color:transparent;width:32px!important}.welcome__intro{padding:16px 0 136px;border-bottom:1px dashed #eae8e3;background-image:radial-gradient(ellipse at center,#fff 0,#eae8e3 100%);background-size:auto 100%;background-position:50% 0}.welcome__intro h1{font-size:2em;margin-bottom:16px;color:#4f5b93}.welcome__logo{display:block;margin:0 auto;max-width:320px}.welcome__logo svg{display:block;height:240px}.welcome__content{padding-top:16px;display:block}.welcome__example{display:block;margin:auto;max-width:800px;margin-top:-160px}.welcome__example pre{background:#fcfcfc;border:1px dashed #eae8e3}.welcome__example .highlight pre{padding:32px;box-shadow:0 0 16px #d6d1c8}.welcome__intro .links a{color:#584b4f;text-decoration:none}.welcome__intro .links a:hover{color:#4f5b93;text-decoration:none}@media (max-width:768px){.welcome__content{padding:32px 16px 16px}.welcome__logo svg{height:160px}.welcome__intro h1{text-align:center;font-size:1.6em;margin-bottom:16px;color:#4f5b93}.welcome__intro .links{text-align:center}}code,pre,tt{font-family:Consolas,Liberation Mono,Menlo,Courier,monospace}code,tt{font-size:12px}pre{font-size:85%;line-height:1.45}.links{margin:0;padding:0}.links li{display:inline-block;margin:0 8px;text-decoration:none}.links li:first-child{margin-left:0}.links li:last-child{margin-right:0}.links a{display:block}.links a,.links a:hover{text-decoration:none}</style>
        <link rel="preload" href="../assets/main.css" as="style" onload="this.rel='stylesheet'">

        <script>!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,n){n.p=window.__assets},function(e,t,n){n(0),e.exports=n(2)},function(e,t,n){n(3),n(4),n(6)},function(e,t,n){"use strict";function r(e){try{return(e||window).document.createElement("link").relList.supports("preload")}catch(e){return!1}}function o(e){function t(){function e(){u.media=l,u.removeEventListener("load",e)}for(var t=n.document.querySelectorAll('link[rel="preload"][as="style"]'),o=0;o<t.length;o++){var i=t[o];i.rel="";var l=i.getAttribute("media")||"all",u=r.createElement("link");u.rel="stylesheet",u.href=i.href,u.media="only x",u.addEventListener("load",e),i.parentNode.insertBefore(u,i.nextSibling||i)}}var n=e||window,r=n.document;t();var o=n.setInterval(t,300);n.addEventListener("load",function(){t(),n.clearInterval(o)})}Object.defineProperty(t,"__esModule",{value:!0}),t.supports=r,t.polyfill=o,r()||o()},function(e,t){},,function(e,t){}]);</script>
        <script async src="../assets/main.js"></script>
        </head>

    <body>
            <header class="header">
            <div class="wrapper">
                <a class="header__logo" href="../">
                    <svg xmlns="http://www.w3.org/2000/svg" width="320" height="47.29" viewBox="0 428.964 320 47.29"><path fill="#584B4F" d="M30.86 452.385c1.637-2.287 2.455-5 2.455-8.134 0-4.313-1.367-7.87-4.088-10.68-2.723-2.812-6.39-4.216-11.004-4.216h-7.71c-3.79 0-6.49.798-8.1 2.388C.806 433.332 0 435.872 0 439.355v36.512h9.08v-17.245h6.53l9.08 17.245h10.52L24.82 457.12c2.395-.87 4.41-2.447 6.04-4.735zm-8.488-3.334c-1.24 1.33-2.82 1.99-4.734 1.99H9.08v-9.47c0-2.74 1.35-4.112 4.05-4.112h4.508c2 0 3.603.61 4.8 1.83 1.196 1.22 1.797 2.82 1.797 4.802 0 1.982-.623 3.64-1.864 4.964v-.003zm20.348 14.536c0 4.572 1.055 7.766 3.167 9.57 2.114 1.81 5.782 2.71 11.008 2.71h16.46v-8.1H57.548c-2.18 0-3.68-.35-4.51-1.045-.83-.695-1.24-1.96-1.24-3.788v-6.467h14.434l.656-8.1h-15.09v-10.912h21.56v-8.098H42.72v34.23zm57.97-33.442c-.718-.523-1.665-.787-2.84-.787-1.177 0-2.168.285-2.972.85-.807.567-1.537 1.592-2.19 3.073l-14.89 42.585h9.47l2.55-8.03h15.613l2.613 8.03h9.47l-14.893-42.588c-.567-1.572-1.21-2.613-1.93-3.135v.002zM92.1 460.19l5.75-18.42 5.487 18.418H92.1v.002zm53.074 5.455c-1.155 1.678-3.245 2.512-6.27 2.512-3.03 0-5.258-.914-6.697-2.74-1.394-1.83-2.093-5.25-2.093-10.256v-4.052c0-1.783.045-3.2.13-4.243.178-3.27.785-5.576 1.833-6.928 1.48-1.914 3.745-2.873 6.794-2.873 2.613 0 4.532.653 5.75 1.96 1.218 1.308 2.07 3.245 2.547 5.813h8.49c0-5.14-1.557-9.07-4.67-11.79-3.114-2.723-7.153-4.084-12.116-4.084-3.398 0-6.293.564-8.687 1.7-6.097 2.783-9.146 9.686-9.146 20.704v3.918c0 13.982 5.945 20.968 17.833 20.968 5.4 0 9.58-1.59 12.54-4.77 2.964-3.176 4.44-7.73 4.44-13.653h-8.426c-.346 3.53-1.1 6.134-2.25 7.81v.005zm14.667-36.29v8.1h12.412v38.41h9.08v-38.41h12.47v-8.1"/><path fill="#4F5B93" d="M218.89 429.356h-18.03v46.51h9.086v-14.897h8.944c4.876 0 8.647-1.337 11.328-4.016 2.683-2.68 4.02-6.608 4.02-11.788s-1.337-9.112-4.02-11.788c-2.68-2.68-6.454-4.02-11.328-4.02v-.002zm4.538 21.686c-1.15 1.177-2.815 1.768-5 1.768h-8.485v-15.354h8.484c4.483 0 6.73 2.572 6.73 7.71 0 2.744-.578 4.703-1.73 5.88v-.004zm43.93-2.02H250.31v-19.666h-9.088v46.51h9.086v-18.81h17.05v18.81h9.076v-46.51h-9.078m48.63 4.02c-2.683-2.68-6.46-4.02-11.335-4.02h-18.027v46.507h9.085V460.97h8.943c4.877 0 8.654-1.336 11.337-4.014 2.68-2.678 4.013-6.608 4.013-11.788s-1.332-9.112-4.013-11.79v-.003zm-6.795 17.666c-1.154 1.177-2.822 1.768-5 1.768h-8.484v-15.354h8.485c4.483 0 6.734 2.572 6.734 7.71 0 2.744-.583 4.703-1.735 5.88v-.004z"/></svg>
                </a>
                <form class="header__search">
                    <input type="search" class="searchbox searchbox--collapsed" data-docsearch placeholder="Search documentation...">
                </form>
            </div>
        </header>
    
            <div class="container">
            <main class="wrapper">
                <h1>
<a id="dns-component" class="anchor" href="#dns-component" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Dns Component</h1>
<p><a href="http://travis-ci.org/reactphp/dns"><img src="https://camo.githubusercontent.com/8037669c8046601dbb1da3ce58b98557639ed9a3/68747470733a2f2f7365637572652e7472617669732d63692e6f72672f72656163747068702f646e732e706e673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://secure.travis-ci.org/reactphp/dns.png?branch=master" style="max-width:100%;"></a> <a href="https://codeclimate.com/github/reactphp/dns"><img src="https://camo.githubusercontent.com/a3c6d4306e2e740842143ba518f937f34c8640a7/68747470733a2f2f636f6465636c696d6174652e636f6d2f6769746875622f72656163747068702f646e732f6261646765732f6770612e737667" alt="Code Climate" data-canonical-src="https://codeclimate.com/github/reactphp/dns/badges/gpa.svg" style="max-width:100%;"></a></p>
<p>Async DNS resolver for <a href="https://reactphp.org/">ReactPHP</a></p>
<p>The main point of the DNS component is to provide async DNS resolution.
However, it is really a toolkit for working with DNS messages, and could
easily be used to create a DNS server.</p>
<p><strong>Table of contents</strong></p>
<ul>
<li><a href="#basic-usage">Basic usage</a></li>
<li>
<a href="#caching">Caching</a>
<ul>
<li><a href="#custom-cache-adapter">Custom cache adapter</a></li>
</ul>
</li>
<li>
<a href="#advanced-usage">Advanced usage</a>
<ul>
<li><a href="#hostsfileexecutor">HostsFileExecutor</a></li>
</ul>
</li>
<li><a href="#install">Install</a></li>
<li><a href="#tests">Tests</a></li>
<li><a href="#license">License</a></li>
<li><a href="#references">References</a></li>
</ul>
<h2>
<a id="basic-usage" class="anchor" href="#basic-usage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Basic usage</h2>
<p>The most basic usage is to just create a resolver through the resolver
factory. All you need to give it is a nameserver, then you can start resolving
names, baby!</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$loop</span> <span class="pl-k">=</span> <span class="pl-c1">React\EventLoop\</span><span class="pl-c1">Factory</span><span class="pl-k">::</span>create();</span>
<span class="pl-s1"><span class="pl-smi">$factory</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-c1">React\Dns\Resolver\</span><span class="pl-c1">Factory</span>();</span>
<span class="pl-s1"><span class="pl-smi">$dns</span> <span class="pl-k">=</span> <span class="pl-smi">$factory</span><span class="pl-k">-&gt;</span>create(<span class="pl-s"><span class="pl-pds">'</span>8.8.8.8<span class="pl-pds">'</span></span>, <span class="pl-smi">$loop</span>);</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$dns</span><span class="pl-k">-&gt;</span>resolve(<span class="pl-s"><span class="pl-pds">'</span>igor.io<span class="pl-pds">'</span></span>)<span class="pl-k">-&gt;</span>then(<span class="pl-k">function</span> (<span class="pl-smi">$ip</span>) {</span>
<span class="pl-s1">    <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span>Host: <span class="pl-smi">$ip</span><span class="pl-cce">\n</span><span class="pl-pds">"</span></span>;</span>
<span class="pl-s1">});</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$loop</span><span class="pl-k">-&gt;</span>run();</span></pre></div>
<p>See also the <a href="https:/github.com/reactphp/dns/blob/v0.4.11/examples">first example</a>.</p>
<blockquote>
<p>Note that the factory loads the hosts file from the filesystem once when
creating the resolver instance.
Ideally, this method should thus be executed only once before the loop starts
and not repeatedly while it is running.</p>
</blockquote>
<p>Pending DNS queries can be cancelled by cancelling its pending promise like so:</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$promise</span> <span class="pl-k">=</span> <span class="pl-smi">$resolver</span><span class="pl-k">-&gt;</span>resolve(<span class="pl-s"><span class="pl-pds">'</span>reactphp.org<span class="pl-pds">'</span></span>);</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$promise</span><span class="pl-k">-&gt;</span>cancel();</span></pre></div>
<p>But there's more.</p>
<h2>
<a id="caching" class="anchor" href="#caching" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Caching</h2>
<p>You can cache results by configuring the resolver to use a <code>CachedExecutor</code>:</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$loop</span> <span class="pl-k">=</span> <span class="pl-c1">React\EventLoop\</span><span class="pl-c1">Factory</span><span class="pl-k">::</span>create();</span>
<span class="pl-s1"><span class="pl-smi">$factory</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-c1">React\Dns\Resolver\</span><span class="pl-c1">Factory</span>();</span>
<span class="pl-s1"><span class="pl-smi">$dns</span> <span class="pl-k">=</span> <span class="pl-smi">$factory</span><span class="pl-k">-&gt;</span>createCached(<span class="pl-s"><span class="pl-pds">'</span>8.8.8.8<span class="pl-pds">'</span></span>, <span class="pl-smi">$loop</span>);</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$dns</span><span class="pl-k">-&gt;</span>resolve(<span class="pl-s"><span class="pl-pds">'</span>igor.io<span class="pl-pds">'</span></span>)<span class="pl-k">-&gt;</span>then(<span class="pl-k">function</span> (<span class="pl-smi">$ip</span>) {</span>
<span class="pl-s1">    <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span>Host: <span class="pl-smi">$ip</span><span class="pl-cce">\n</span><span class="pl-pds">"</span></span>;</span>
<span class="pl-s1">});</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-k">...</span></span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$dns</span><span class="pl-k">-&gt;</span>resolve(<span class="pl-s"><span class="pl-pds">'</span>igor.io<span class="pl-pds">'</span></span>)<span class="pl-k">-&gt;</span>then(<span class="pl-k">function</span> (<span class="pl-smi">$ip</span>) {</span>
<span class="pl-s1">    <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span>Host: <span class="pl-smi">$ip</span><span class="pl-cce">\n</span><span class="pl-pds">"</span></span>;</span>
<span class="pl-s1">});</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$loop</span><span class="pl-k">-&gt;</span>run();</span></pre></div>
<p>If the first call returns before the second, only one query will be executed.
The second result will be served from an in memory cache.
This is particularly useful for long running scripts where the same hostnames
have to be looked up multiple times.</p>
<p>See also the <a href="https:/github.com/reactphp/dns/blob/v0.4.11/examples">third example</a>.</p>
<h3>
<a id="custom-cache-adapter" class="anchor" href="#custom-cache-adapter" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Custom cache adapter</h3>
<p>By default, the above will use an in memory cache.</p>
<p>You can also specify a custom cache implementing <a href="https://github.com/reactphp/cache"><code>CacheInterface</code></a> to handle the record cache instead:</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$cache</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-c1">React\Cache\</span><span class="pl-c1">ArrayCache</span>();</span>
<span class="pl-s1"><span class="pl-smi">$loop</span> <span class="pl-k">=</span> <span class="pl-c1">React\EventLoop\</span><span class="pl-c1">Factory</span><span class="pl-k">::</span>create();</span>
<span class="pl-s1"><span class="pl-smi">$factory</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-c1">React\Dns\Resolver\</span><span class="pl-c1">Factory</span>();</span>
<span class="pl-s1"><span class="pl-smi">$dns</span> <span class="pl-k">=</span> <span class="pl-smi">$factory</span><span class="pl-k">-&gt;</span>createCached(<span class="pl-s"><span class="pl-pds">'</span>8.8.8.8<span class="pl-pds">'</span></span>, <span class="pl-smi">$loop</span>, <span class="pl-smi">$cache</span>);</span></pre></div>
<p>See also the wiki for possible <a href="https://github.com/reactphp/react/wiki/Users#cache-implementations">cache implementations</a>.</p>
<h2>
<a id="advanced-usage" class="anchor" href="#advanced-usage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Advanced Usage</h2>
<p>For more advanced usages one can utilize the <code>React\Dns\Query\Executor</code> directly.
The following example looks up the <code>IPv6</code> address for <code>igor.io</code>.</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$loop</span> <span class="pl-k">=</span> <span class="pl-c1">Factory</span><span class="pl-k">::</span>create();</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$executor</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-c1">Executor</span>(<span class="pl-smi">$loop</span>, <span class="pl-k">new</span> <span class="pl-c1">Parser</span>(), <span class="pl-k">new</span> <span class="pl-c1">BinaryDumper</span>(), <span class="pl-c1">null</span>);</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$executor</span><span class="pl-k">-&gt;</span>query(</span>
<span class="pl-s1">    <span class="pl-s"><span class="pl-pds">'</span>8.8.8.8:53<span class="pl-pds">'</span></span>, </span>
<span class="pl-s1">    <span class="pl-k">new</span> <span class="pl-c1">Query</span>(<span class="pl-smi">$name</span>, <span class="pl-c1">Message</span><span class="pl-k">::</span><span class="pl-c1">TYPE_AAAA</span>, <span class="pl-c1">Message</span><span class="pl-k">::</span><span class="pl-c1">CLASS_IN</span>, <span class="pl-c1">time</span>())</span>
<span class="pl-s1">)<span class="pl-k">-&gt;</span>done(<span class="pl-k">function</span> (<span class="pl-c1">Message</span> <span class="pl-smi">$message</span>) {</span>
<span class="pl-s1">    <span class="pl-k">foreach</span> (<span class="pl-smi">$message</span><span class="pl-k">-&gt;</span><span class="pl-smi">answers</span> <span class="pl-k">as</span> <span class="pl-smi">$answer</span>) {</span>
<span class="pl-s1">        <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>IPv6: <span class="pl-pds">'</span></span> <span class="pl-k">.</span> <span class="pl-smi">$answer</span><span class="pl-k">-&gt;</span><span class="pl-smi">data</span> <span class="pl-k">.</span> <span class="pl-c1">PHP_EOL</span>;</span>
<span class="pl-s1">    }</span>
<span class="pl-s1">}, <span class="pl-s"><span class="pl-pds">'</span>printf<span class="pl-pds">'</span></span>);</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$loop</span><span class="pl-k">-&gt;</span>run();</span>
<span class="pl-s1"></span></pre></div>
<p>See also the <a href="https:/github.com/reactphp/dns/blob/v0.4.11/examples">fourth example</a>.</p>
<h3>
<a id="hostsfileexecutor" class="anchor" href="#hostsfileexecutor" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>HostsFileExecutor</h3>
<p>Note that the above <code>Executor</code> class always performs an actual DNS query.
If you also want to take entries from your hosts file into account, you may
use this code:</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$hosts</span> <span class="pl-k">=</span> <span class="pl-c1">\React\Dns\Config\</span><span class="pl-c1">HostsFile</span><span class="pl-k">::</span>loadFromPathBlocking();</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$executor</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-c1">Executor</span>(<span class="pl-smi">$loop</span>, <span class="pl-k">new</span> <span class="pl-c1">Parser</span>(), <span class="pl-k">new</span> <span class="pl-c1">BinaryDumper</span>(), <span class="pl-c1">null</span>);</span>
<span class="pl-s1"><span class="pl-smi">$executor</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-c1">HostsFileExecutor</span>(<span class="pl-smi">$hosts</span>, <span class="pl-smi">$executor</span>);</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$executor</span><span class="pl-k">-&gt;</span>query(</span>
<span class="pl-s1">    <span class="pl-s"><span class="pl-pds">'</span>8.8.8.8:53<span class="pl-pds">'</span></span>, </span>
<span class="pl-s1">    <span class="pl-k">new</span> <span class="pl-c1">Query</span>(<span class="pl-s"><span class="pl-pds">'</span>localhost<span class="pl-pds">'</span></span>, <span class="pl-c1">Message</span><span class="pl-k">::</span><span class="pl-c1">TYPE_A</span>, <span class="pl-c1">Message</span><span class="pl-k">::</span><span class="pl-c1">CLASS_IN</span>, <span class="pl-c1">time</span>())</span>
<span class="pl-s1">);</span></pre></div>
<h2>
<a id="install" class="anchor" href="#install" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Install</h2>
<p>The recommended way to install this library is <a href="http://getcomposer.org">through Composer</a>.
<a href="http://getcomposer.org/doc/00-intro.md">New to Composer?</a></p>
<p>This will install the latest supported version:</p>
<div class="highlight highlight-source-shell"><pre>$ composer require react/dns:^0.4.11</pre></div>
<p>See also the <a href="changelog.html">CHANGELOG</a> for details about version upgrades.</p>
<p>This project aims to run on any platform and thus does not require any PHP
extensions and supports running on legacy PHP 5.3 through current PHP 7+ and
HHVM.
It's <em>highly recommended to use PHP 7+</em> for this project.</p>
<h2>
<a id="tests" class="anchor" href="#tests" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Tests</h2>
<p>To run the test suite, you first need to clone this repo and then install all
dependencies <a href="http://getcomposer.org">through Composer</a>.
Because the test suite contains some circular dependencies, you may have to
manually specify the root package version like this:</p>
<div class="highlight highlight-source-shell"><pre>$ COMPOSER_ROOT_VERSION=<span class="pl-s"><span class="pl-pds">`</span>git describe --abbrev=0<span class="pl-pds">`</span></span> composer install</pre></div>
<p>To run the test suite, go to the project root and run:</p>
<div class="highlight highlight-source-shell"><pre>$ php vendor/bin/phpunit</pre></div>
<h2>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>License</h2>
<p>MIT, see <a href="license.html">LICENSE file</a>.</p>
<h2>
<a id="references" class="anchor" href="#references" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>References</h2>
<ul>
<li>
<a href="http://tools.ietf.org/html/rfc1034">RFC 1034</a> Domain Names - Concepts and Facilities</li>
<li>
<a href="http://tools.ietf.org/html/rfc1035">RFC 1035</a> Domain Names - Implementation and Specification</li>
</ul>

            </main>
        </div>
    
            <footer class="footer">
            <div class="wrapper">
                <ul class="links">
                    <li><a href="https://github.com/reactphp"><i class="icon-github" aria-hidden="true"></i> GitHub</a></li>
                    <li><a href="https://twitter.com/reactphp"><i class="icon-twitter" aria-hidden="true"></i> Twitter</a></li>
                    <li><a href="irc://irc.freenode.net/reactphp"><i class="icon-hash" aria-hidden="true"></i> IRC</a></li>
                </ul>
            </div>
        </footer>
        </body>
</html>
