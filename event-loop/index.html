<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <title>EventLoop: 
EventLoop Component - ReactPHP</title>

        <meta name="description" content="ReactPHP&#039;s core reactor event loop that libraries can use for evented I/O.">

        <link rel="apple-touch-icon" sizes="180x180" href="https://jsor-labs.github.io/website/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="https://jsor-labs.github.io/website/favicon-32x32.png">
        <link rel="manifest" href="https://jsor-labs.github.io/website/manifest.json">
        <link rel="mask-icon" href="https://jsor-labs.github.io/website/safari-pinned-tab.svg" color="#4f5b93">
        <meta name="apple-mobile-web-app-title" content="ReactPHP">
        <meta name="application-name" content="ReactPHP">
        <meta name="theme-color" content="#f4f3f1">
        <meta name="msapplication-config" content="https://jsor-labs.github.io/website/browserconfig.xml" />

        <meta property="og:image" content="https://jsor-labs.github.io/website/og-image.png">

            <link rel="preload" href="../assets/19ca4d35c8f94db0fa14422334dd2ad3.woff" as="font" type="font/woff" crossorigin>
        <link rel="preload" href="../assets/be4ba3dd17008135675e945b630be8f6.woff" as="font" type="font/woff" crossorigin>

        <script>window.__assets = '../assets/';</script>
        <script>!function(e){function t(t){for(var n,o,i=t[0],c=t[1],f=t[2],l=0,s=[];l<i.length;l++)o=i[l],a[o]&&s.push(a[o][0]),a[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);for(d&&d(t);s.length;)s.shift()();return u.push.apply(u,f||[]),r()}function r(){for(var e,t=0;t<u.length;t++){for(var r=u[t],n=!0,o=1;o<r.length;o++){var c=r[o];0!==a[c]&&(n=!1)}n&&(u.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},o={0:0},a={0:0},u=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(e){var t=[];o[e]?t.push(o[e]):0!==o[e]&&{2:1,3:1,4:1}[e]&&t.push(o[e]=new Promise(function(t,r){for(var n=({}[e]||e)+"."+{1:"31d6cfe0d16ae931b73c",2:"a918c6e742a23bd44081",3:"c866b624d729ddc93e2a",4:"51bfb1befda41f6217e9"}[e]+".css",o=i.p+n,a=document.getElementsByTagName("link"),u=0;u<a.length;u++){var c=(l=a[u]).getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(c===n||c===o))return t()}var f=document.getElementsByTagName("style");for(u=0;u<f.length;u++){var l;if((c=(l=f[u]).getAttribute("data-href"))===n||c===o)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var n=t&&t.target&&t.target.src||o,a=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");a.request=n,r(a)},d.href=o,document.getElementsByTagName("head")[0].appendChild(d)}).then(function(){o[e]=0}));var r=a[e];if(0!==r)if(r)t.push(r[2]);else{var n=new Promise(function(t,n){r=a[e]=[t,n]});t.push(r[2]=n);var u,c=document.getElementsByTagName("head")[0],f=document.createElement("script");f.charset="utf-8",f.timeout=120,i.nc&&f.setAttribute("nonce",i.nc),f.src=function(e){return i.p+""+({}[e]||e)+"."+{1:"b5d09ed9f7296684b4a4",2:"27a9c62ca2a2d68c58ef",3:"31751a2872a44cb9d1a7",4:"5dd6056bd1b85f25b597"}[e]+".js"}(e),u=function(t){f.onerror=f.onload=null,clearTimeout(l);var r=a[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src,u=new Error("Loading chunk "+e+" failed.\n("+n+": "+o+")");u.type=n,u.request=o,r[1](u)}a[e]=void 0}};var l=setTimeout(function(){u({type:"timeout",target:f})},12e4);f.onerror=f.onload=u,c.appendChild(f)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.oe=function(e){throw console.error(e),e};var c=window.webpackJsonp=window.webpackJsonp||[],f=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var d=f;r()}([]);</script>
        <style>@font-face{font-display:swap;font-family:Source Sans Pro;font-style:normal;font-weight:400;src:local("Source Sans Pro Regular"),local("SourceSansPro-Regular"),url(../assets/19ca4d35c8f94db0fa14422334dd2ad3.woff) format("woff")}@font-face{font-display:swap;font-family:Source Sans Pro;font-style:normal;font-weight:700;src:local("Source Sans Pro Bold"),local("SourceSansPro-Bold"),url(../assets/be4ba3dd17008135675e945b630be8f6.woff) format("woff")}@font-face{font-family:icons;font-style:normal;font-weight:400;src:url(../assets/063d0ba7099c5ef73aa81a6a50e5767f.ttf) format("truetype"),url(../assets/5ea4cc5c6d91fb8d905c55c960765c57.woff) format("woff"),url(../assets/d59afb7dd3b3ad18ecea34d16e06d53c.svg#icons) format("svg")}[class*=" icon-"],[class^=icon-]{-moz-osx-font-smoothing:grayscale;-webkit-font-feature-settings:normal;-webkit-font-smoothing:antialiased;font-family:icons!important;font-feature-settings:normal;font-style:normal;font-variant:normal;font-weight:400;line-height:1;speak:none;text-transform:none}.icon-hash:before{content:"\E900"}.icon-twitter:before{content:"\E901"}.icon-github:before{content:"\E902"}.icon-blog:before{content:"\E905"}.icon-earth:before{content:"\E903"}.icon-link:before{content:"\E906"}.icon-youtube:before{content:"\E904"}.icon-book:before{content:"\F007"}.icon-calendar:before{content:"\F068"}.icon-chevron-down:before{content:"\F0A3"}.icon-chevron-up:before{content:"\F0A2"}.icon-law:before{content:"\F0D8"}.icon-search:before{content:"\F02E"}.icon-x:before{content:"\F081"}.icon-feed:before{content:"\EA9B"}[class*=" icon-"],[class^=icon-]{vertical-align:-8%}html{-webkit-box-sizing:border-box;box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;font-size:16px;line-height:1.6}@media (max-width:768px){html{font-size:18px}}*,:after,:before{-webkit-box-sizing:inherit;box-sizing:inherit}body{background-color:#fff;color:#584b4f;margin:0}a{color:#4f5b93}a:hover{color:#a2aacd;text-decoration:underline}blockquote{-webkit-box-shadow:0 1px 0 0 rgba(0,0,0,.1);background-color:#f4f3f1;border-left:4px solid #4f5b93;border-radius:4px;box-shadow:0 1px 0 0 rgba(0,0,0,.1);font-size:14px;font-size:.875rem;padding:16px 16px 16px 24px;position:relative}blockquote:before{-webkit-box-sizing:border-box;background:#4f5b93;border-radius:50%;box-sizing:border-box;color:#fff;content:"i";display:block;font-size:12px;font-weight:700;height:24px;left:-14px;line-height:24px;padding:0 4px;position:absolute;text-align:center;top:12px;width:24px}blockquote :last-child{margin-bottom:0}blockquote,fieldset,form,h1,h2,h3,h4,h5,h6,hr,ol,p,ul{margin:0 0 16px}ul ul{margin-bottom:0}hr{border:0;border-bottom:1px dashed #eae8e3;clear:both;height:0;padding:0}h1,h2,h3,h4,h5,h6{-webkit-font-smoothing:antialiased;color:#584b4f;font-family:Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-weight:700;line-height:1}h1 a,h1 a:hover,h2 a,h2 a:hover,h3 a,h3 a:hover,h4 a,h4 a:hover,h5 a,h5 a:hover,h6 a,h6 a:hover{text-decoration:none}h1{font-size:40px;font-size:2.5rem;letter-spacing:-1px;margin-bottom:32px}h1,h1 a,h1 a:hover{color:#4f5b93}h1:not(:first-child){margin-top:32px}h2{font-size:32px;font-size:2rem;margin-bottom:32px}h2,h2 a,h2 a:hover{color:#4f5b93}h2:not(:first-child){margin-top:32px}h3{font-size:24px;font-size:1.5rem;margin-bottom:24px}h3,h3 a,h3 a:hover{color:#584b4f}h3:not(:first-child){margin-top:24px}h4{font-size:20px;font-size:1.25rem}h4,h4 a,h4 a:hover{color:#4f5b93}h4:not(:first-child){margin-top:24px}@media (max-width:768px){h1{font-size:2rem}h2{font-size:1.75rem;margin-bottom:32px}}.container{padding:32px}@media (max-width:768px){.container{padding:16px}}.wrapper{margin:auto;max-width:1600px}.wrapper--medium{max-width:1280px}.wrapper--small{margin:auto;max-width:960px}.wrapper--narrow{max-width:640px}.main{width:calc(98% - 400px)}.main,.sidebar{margin-bottom:32px}.sidebar{width:calc(400px - 2%)}@media (max-width:1024px){.main,.sidebar{margin-top:16px;width:auto}}.visually-hidden{clip:rect(1px,1px,1px,1px);height:1px;overflow:hidden;position:absolute!important;width:1px}.grid{-ms-flex-direction:row;-ms-flex-pack:center;-ms-flex-wrap:wrap;-webkit-box-direction:normal;-webkit-box-orient:horizontal;-webkit-box-pack:center;display:-webkit-box;display:-ms-flexbox;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center;margin-left:-2%;width:102%}.grid>*{margin-left:2%;max-width:100%}.grid--4cols>*{-ms-flex-preferred-size:23%;flex-basis:23%}.grid--3cols>*{-ms-flex-preferred-size:31.33%;flex-basis:31.33%}.grid--2cols>*{-ms-flex-preferred-size:48%;flex-basis:48%}@media (max-width:768px){.grid{-ms-flex-direction:column;-webkit-box-direction:normal;-webkit-box-orient:vertical;flex-direction:column}.grid,.grid>*{margin-left:0;width:100%}.grid>*{-ms-flex:0 0 auto;-webkit-box-flex:0;flex:0 0 auto}}.center{text-align:center}.center h1,.center h2,.center h3,.center h4,.center h5,.center h6,.hamburger{display:inline-block}.hamburger{background-color:transparent;border:0;color:inherit;cursor:pointer;font:inherit;height:48px;margin:0;outline:none;overflow:visible;padding:14px 12px;text-transform:none}.hamburger__box{display:inline-block;height:16px;position:relative;width:24px}.hamburger__inner{display:block;margin-top:-2px;top:50%}.hamburger__inner,.hamburger__inner:after,.hamburger__inner:before{-o-transition-duration:.15s;-o-transition-property:transform;-o-transition-timing-function:ease;-webkit-transition-duration:.15s;-webkit-transition-property:-webkit-transform;-webkit-transition-timing-function:ease;background-color:#584b4f;border-radius:2px;height:3px;position:absolute;transition-duration:.15s;transition-property:-webkit-transform;transition-property:transform;transition-property:transform,-webkit-transform;transition-timing-function:ease;width:24px}.hamburger__inner:after,.hamburger__inner:before{content:"";display:block}.hamburger__inner:before{top:-6px}.hamburger__inner:after{bottom:-6px}.header{-webkit-box-shadow:0 1px 0 0 rgba(0,0,0,.08);background:#fefefe;box-shadow:0 1px 0 0 rgba(0,0,0,.08);padding:0 32px;width:100%}@media (max-width:768px){.header{padding:0 16px}}.header__container{-ms-flex-align:center;-ms-flex-pack:justify;-webkit-box-align:center;-webkit-box-pack:justify;align-items:center;display:-webkit-box;display:-ms-flexbox;display:flex;justify-content:space-between;position:relative;width:100%}.header__logo{display:block;line-height:1;padding:16px 0}.header__logo svg{display:block;height:18px;width:120px}.header__search{margin:0;position:absolute;right:48px;top:7px;z-index:799}.header__search input{width:400px}@media (max-width:768px){.header__search input{width:calc(100vw - 94px)}}.header__menu{position:absolute;right:-12px;top:0;z-index:800}.footer{background:#584b4f;padding:32px;text-align:center;text-shadow:1px 1px 0 rgba(0,0,0,.125)}.footer .links a{color:#eae8e3;text-decoration:none}.footer .links a:hover{color:#9ad8bb;text-decoration:none}.iframe{height:0;overflow:hidden;padding-bottom:56.25%;position:relative;width:100%}.iframe iframe{height:100%;left:0;position:absolute;top:0;width:100%}.links{margin:0;padding:0}.links li{display:inline-block;margin:0 8px;text-decoration:none}.links li:first-child{margin-left:0}.links li:last-child{margin-right:0}.links a{display:block}.box,.links a,.links a:hover{text-decoration:none}.box{-ms-flex-direction:column;-webkit-box-direction:normal;-webkit-box-orient:vertical;-webkit-box-shadow:0 1px 0 0 rgba(0,0,0,.1);background:#f4f3f1;border-radius:4px;box-shadow:0 1px 0 0 rgba(0,0,0,.1);color:inherit;display:-webkit-box;display:-ms-flexbox;display:flex;flex-direction:column;margin-bottom:24px;margin-top:0;overflow:auto;padding:24px;text-align:left;vertical-align:top}.box:hover{-webkit-box-shadow:0 1px 0 0 rgba(0,0,0,.15);background:#eae8e3;box-shadow:0 1px 0 0 rgba(0,0,0,.15);text-decoration:none}.box h1,.box h2,.box h3,.box h4,.box h5,.box h6,.box hr,.box ol,.box p,.box ul{margin-bottom:8px}.box h1,.box h2,.box h3,.box h4,.box h5,.box h6{color:#584b4f}.box :first-child{margin-top:0}.box :last-child{margin-bottom:0}.box__content{-ms-flex-positive:1;-webkit-box-flex:1;color:#584b4f;flex-grow:1;text-decoration:none}.box__content p{font-size:14px;font-size:.875rem}.box__content:hover{color:#584b4f;text-decoration:none}.box__content:not(:last-child){margin-bottom:16px}.box__link{display:block;font-size:12px;font-size:.75rem;text-decoration:none}.box__link,.box__link [class*=icon]{color:#4f5b93}.box__link:hover{color:#a2aacd;text-decoration:none}code,pre,tt{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace}code,tt{background-color:rgba(0,0,0,.05);border-radius:4px;font-size:12px;font-size:.75rem;margin:0;padding:.3rem .45rem}code br,tt br{display:none}del code{text-decoration:inherit}pre{font-size:14px;font-size:.875rem;line-height:1.45;text-align:left;word-wrap:normal}@media (max-width:768px){pre{font-size:.75rem}}pre>code{background:transparent;border:0;font-size:100%;margin:0;padding:0;white-space:pre;word-break:normal}.highlight{margin-bottom:16px}.highlight pre{margin-bottom:0;word-break:normal}.highlight pre,pre{-webkit-box-shadow:0 1px 0 0 rgba(0,0,0,.08);background-color:#f9f9f8;border-radius:4px;box-shadow:0 1px 0 0 rgba(0,0,0,.08);color:#584b4f;overflow:auto;padding:16px 16px 14px;text-shadow:none!important}pre code,pre tt{background-color:transparent;border:0;display:inline;line-height:inherit;margin:0;max-width:none;overflow:visible;padding:0;word-wrap:normal}pre code:after,pre code:before,pre tt:after,pre tt:before{content:normal}.pl-c{color:#969896}.pl-c1,.pl-s .pl-v{color:#0086b3}.pl-e,.pl-en{color:#795da3}.pl-s .pl-s1,.pl-smi{color:#444}.pl-ent{color:#63a35c}.pl-k{color:#a71d5d}.pl-pds,.pl-s,.pl-s .pl-pse .pl-s1,.pl-sr,.pl-sr .pl-cce,.pl-sr .pl-sra,.pl-sr .pl-sre{color:#183691}.pl-smw,.pl-v{color:#ed6a43}.pl-bu{color:#b52a1d}.pl-c2,.pl-ii{background-color:#b52a1d;color:#f8f8f8}.pl-c2:before{content:"^M"}.pl-sr .pl-cce{color:#63a35c;font-weight:700}.pl-ml{color:#693a17}.pl-mh,.pl-mh .pl-en,.pl-ms{color:#1d3e81;font-weight:700}.pl-mq{color:teal}.pl-mi{color:#333;font-style:italic}.pl-mb{color:#333;font-weight:700}.pl-md{background-color:#ffecec;color:#bd2c00}.pl-mi1{background-color:#eaffea;color:#55a532}.pl-mc{background-color:#ffe3b4;color:#ef9700}.pl-mi2{background-color:grey;color:#d8d8d8}.pl-mdr{color:#795da3;font-weight:700}.pl-mo{color:#1d3e81}.pl-ba{color:#595e62}.pl-sg{color:silver}.pl-corl{color:#183691;text-decoration:underline}.anchor{-webkit-transform:translateX(-100%);display:block;float:left;padding-right:2px;position:absolute;text-decoration:none!important;transform:translateX(-100%)}.anchor:focus{outline:none}.anchor>*{visibility:hidden}:hover>.anchor>*{visibility:visible}.anchor>:before{color:#a2aacd;content:"#";font-weight:400!important}.anchor--disable .anchor>*,.anchor.anchor--disable>*{visibility:hidden!important}.searchbox{width:100%}.searchbox,.searchbox:focus{-moz-appearance:none;-o-transition:width .35s cubic-bezier(.23,1,.32,1);-webkit-appearance:none;-webkit-box-shadow:0 1px 0 0 rgba(0,0,0,.15);-webkit-transition:width .35s cubic-bezier(.23,1,.32,1);appearance:none;background:#eae8e3 url(../assets/72dc47391c5751aa9e94d8d46846e31c.svg) no-repeat 10px;background-size:16px 16px;border:0;border-radius:4px;box-shadow:0 1px 0 0 rgba(0,0,0,.15);color:#584b4f;font-size:14px;font-size:.875rem;line-height:24px;outline:none;padding:6px 8px 6px 32px;transition:width .35s cubic-bezier(.23,1,.32,1)}.searchbox::-webkit-input-placeholder{color:#afa1a5}.searchbox:-moz-placeholder{color:#afa1a5}.searchbox::-moz-placeholder{color:#afa1a5;opacity:1}.searchbox:-ms-input-placeholder{color:#afa1a5}.searchbox:focus{-webkit-box-shadow:0 1px 0 0 rgba(0,0,0,.1);background-color:#f4f3f1!important;box-shadow:0 1px 0 0 rgba(0,0,0,.1)}.searchbox--collapsed:not(:focus){-webkit-box-shadow:none;background-color:transparent;border:0;box-shadow:none;cursor:pointer;margin-right:-12px;width:32px!important}.searchbox--collapsed:not(:focus)::-webkit-search-cancel-button,.searchbox--collapsed:not(:focus)::-webkit-search-decoration{display:none}.searchbox--collapsed:not(:focus)::-webkit-search-results-button,.searchbox--collapsed:not(:focus)::-webkit-search-results-decoration{display:none}.searchbox--collapsed:not(:focus)::-ms-clear{display:none}.searchbox--large,.searchbox--large:focus{padding:8px 12px 8px 40px}.alert{-webkit-box-shadow:0 1px 0 0 rgba(0,0,0,.1);background-color:#f4f3f1;border-left:4px solid #ba3525;border-radius:4px;box-shadow:0 1px 0 0 rgba(0,0,0,.1);font-size:.9em;padding:16px 16px 16px 24px;position:relative}.alert:before{-webkit-box-sizing:border-box;background:#ba3525;border-radius:50%;box-sizing:border-box;color:#fff;content:"!";display:block;font-size:12px;font-weight:700;height:24px;left:-14px;line-height:22px;padding:0 4px;position:absolute;text-align:center;top:12px;width:24px}.alert a{color:#ba3525}.alert :last-child{margin-bottom:0}.toc{-ms-flex-wrap:wrap;display:-webkit-box;display:-ms-flexbox;display:flex;flex-wrap:wrap;list-style:none;margin-left:-4px;padding:0}.toc li{margin:4px}.toc a{-webkit-box-shadow:0 1px 0 0 rgba(0,0,0,.1);background-color:#584b4f;border-radius:4px;box-shadow:0 1px 0 0 rgba(0,0,0,.1);display:-webkit-box;display:-ms-flexbox;display:flex;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;font-weight:bolder;letter-spacing:normal;padding:.25rem 1rem .15rem}.toc a,.toc a:hover{color:#fff;text-decoration:none}@media (max-width:768px){.toc{font-size:.85rem}}.welcome__intro{background-image:-webkit-radial-gradient(center,ellipse,#fff 0,#eae8e3 100%);background-image:-o-radial-gradient(center,ellipse,#fff 0,#eae8e3 100%);background-image:radial-gradient(ellipse at center,#fff 0,#eae8e3 100%);background-position:50% 0;background-size:auto 100%;border-bottom:1px dashed #eae8e3;padding:16px 0 136px}.welcome__intro h1{color:#4f5b93;font-size:32px;font-size:2rem;margin-bottom:16px}.welcome__logo{display:block;margin:0 auto;max-width:320px}.welcome__logo svg{display:block;height:240px}.welcome__content{display:block;max-width:calc(98% - 320px);padding-top:16px}.welcome__example{display:block;margin:-160px auto auto;max-width:800px}.welcome__example .highlight pre{-webkit-box-shadow:0 0 16px #d6d1c8;background:#fff;box-shadow:0 0 16px #d6d1c8;padding:32px}.welcome__intro .links a{color:#584b4f;text-decoration:none}.welcome__intro .links a:hover{color:#4f5b93;text-decoration:none}@media (max-width:768px){.welcome__content{max-width:100%;padding:32px 16px 16px}.welcome__logo svg{height:160px}.welcome__intro h1{color:#4f5b93;font-size:1.75rem;margin-bottom:16px;text-align:center}.welcome__intro .links{text-align:center}}.off-canvas-menu{-webkit-transform:translate3d(105%,0,0);position:fixed;right:0;top:0;transform:translate3d(105%,0,0)}.component-info{-webkit-box-shadow:0 1px 0 0 rgba(0,0,0,.1);background-color:#f4f3f1;border-radius:4px;bottom:16px;box-shadow:0 1px 0 0 rgba(0,0,0,.1);color:#584b4f;font-size:14px;font-size:.875rem;padding:24px;position:-webkit-sticky;position:sticky;top:16px}.component-info a,.component-info a [class*=icon]{color:#584b4f}.component-info a:hover{color:#afa1a5;text-decoration:none}.component-info pre{font-size:12px;font-size:.75rem;line-height:1}.component-info__title{-ms-flex-align:center;-webkit-box-align:center;align-items:center;color:#584b4f;display:-webkit-box;display:-ms-flexbox;display:flex;font-size:24px;font-size:1.5rem;line-height:16px;line-height:1rem;margin-bottom:1rem}.component-info__title a{text-decoration:none}.component-info__title>:not(:last-child){margin-right:8px}.component-info__subtitle{color:#afa1a5;font-size:14px;font-size:.875rem;font-weight:700;letter-spacing:.1em;line-height:14px;line-height:.875rem;margin-bottom:.875rem;text-transform:uppercase}.component-info__info{-ms-flex-flow:row;-ms-flex-pack:start;-webkit-box-direction:normal;-webkit-box-orient:horizontal;-webkit-box-pack:start;display:-webkit-box;display:-ms-flexbox;display:flex;flex-flow:row;justify-content:flex-start;list-style:none;padding:0}.component-info__info li{margin-right:16px}.component-info__info li:last-child{margin-right:0}.component-info__info a{-o-text-overflow:ellipsis;font-size:12px;font-size:.75rem;text-decoration:none;text-overflow:ellipsis;white-space:nowrap}.component-info__contributors{-ms-flex-wrap:wrap;display:-webkit-box;display:-ms-flexbox;display:flex;flex-wrap:wrap;list-style:none;padding:0}.component-info__contributors li{margin:0;padding:0 4px 4px 0}.component-info__contributors img{border-radius:2px;display:block;height:auto;width:40px}.component-info__contributors img,.component-info__participation{-webkit-box-shadow:0 1px 0 0 rgba(0,0,0,.1);box-shadow:0 1px 0 0 rgba(0,0,0,.1)}.component-info__participation{background-color:#f9f9f8;border-radius:4px;padding:8px;text-align:center}.component-info__participation svg{display:block;height:auto!important;margin:auto;max-width:100%}.version-selector{color:#fff;font-size:14px;font-size:.875rem;position:relative;visibility:hidden}.version-selector :last-child{margin-bottom:0}.version-selector__button,.version-selector__version{-webkit-appearance:none;-webkit-box-shadow:none;-webkit-box-shadow:0 1px 0 0 rgba(0,0,0,.1);background-color:#584b4f;border:0;border-radius:4px;box-shadow:none;box-shadow:0 1px 0 0 rgba(0,0,0,.1);color:#fff;cursor:pointer;display:-webkit-box;display:-ms-flexbox;display:flex;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:12px;font-size:.75rem;font-weight:bolder;letter-spacing:normal;margin:0;outline:none;overflow:visible;padding:.25rem .4rem .2rem;text-decoration:none;text-shadow:none;text-transform:none}.version-selector__button{position:relative}.version-selector__button [class=icon-chevron-down]{display:inline-block;margin-left:4px}.version-selector__button [class=icon-chevron-up]{display:none;margin-left:4px}.version-selector__panel{position:fixed;top:-20000em;visibility:hidden}</style>
        <script async src="../assets/main.e8d2c78f2f1a595c608a.js"></script>
            </head>

    <body>
            <header class="header">
            <div class="wrapper">
                <div class="header__container">
                    <a class="header__logo" href="../">
                        <svg xmlns="http://www.w3.org/2000/svg" width="320" height="47.29" viewBox="0 428.964 320 47.29"><path fill="#584B4F" d="M30.86 452.385c1.637-2.287 2.455-5 2.455-8.134 0-4.313-1.367-7.87-4.088-10.68-2.723-2.812-6.39-4.216-11.004-4.216h-7.71c-3.79 0-6.49.798-8.1 2.388C.806 433.332 0 435.872 0 439.355v36.512h9.08v-17.245h6.53l9.08 17.245h10.52L24.82 457.12c2.395-.87 4.41-2.447 6.04-4.735zm-8.488-3.334c-1.24 1.33-2.82 1.99-4.734 1.99H9.08v-9.47c0-2.74 1.35-4.112 4.05-4.112h4.508c2 0 3.603.61 4.8 1.83 1.196 1.22 1.797 2.82 1.797 4.802 0 1.982-.623 3.64-1.864 4.964v-.003zm20.348 14.536c0 4.572 1.055 7.766 3.167 9.57 2.114 1.81 5.782 2.71 11.008 2.71h16.46v-8.1H57.548c-2.18 0-3.68-.35-4.51-1.045-.83-.695-1.24-1.96-1.24-3.788v-6.467h14.434l.656-8.1h-15.09v-10.912h21.56v-8.098H42.72v34.23zm57.97-33.442c-.718-.523-1.665-.787-2.84-.787-1.177 0-2.168.285-2.972.85-.807.567-1.537 1.592-2.19 3.073l-14.89 42.585h9.47l2.55-8.03h15.613l2.613 8.03h9.47l-14.893-42.588c-.567-1.572-1.21-2.613-1.93-3.135v.002zM92.1 460.19l5.75-18.42 5.487 18.418H92.1v.002zm53.074 5.455c-1.155 1.678-3.245 2.512-6.27 2.512-3.03 0-5.258-.914-6.697-2.74-1.394-1.83-2.093-5.25-2.093-10.256v-4.052c0-1.783.045-3.2.13-4.243.178-3.27.785-5.576 1.833-6.928 1.48-1.914 3.745-2.873 6.794-2.873 2.613 0 4.532.653 5.75 1.96 1.218 1.308 2.07 3.245 2.547 5.813h8.49c0-5.14-1.557-9.07-4.67-11.79-3.114-2.723-7.153-4.084-12.116-4.084-3.398 0-6.293.564-8.687 1.7-6.097 2.783-9.146 9.686-9.146 20.704v3.918c0 13.982 5.945 20.968 17.833 20.968 5.4 0 9.58-1.59 12.54-4.77 2.964-3.176 4.44-7.73 4.44-13.653h-8.426c-.346 3.53-1.1 6.134-2.25 7.81v.005zm14.667-36.29v8.1h12.412v38.41h9.08v-38.41h12.47v-8.1"/><path fill="#4F5B93" d="M218.89 429.356h-18.03v46.51h9.086v-14.897h8.944c4.876 0 8.647-1.337 11.328-4.016 2.683-2.68 4.02-6.608 4.02-11.788s-1.337-9.112-4.02-11.788c-2.68-2.68-6.454-4.02-11.328-4.02v-.002zm4.538 21.686c-1.15 1.177-2.815 1.768-5 1.768h-8.485v-15.354h8.484c4.483 0 6.73 2.572 6.73 7.71 0 2.744-.578 4.703-1.73 5.88v-.004zm43.93-2.02H250.31v-19.666h-9.088v46.51h9.086v-18.81h17.05v18.81h9.076v-46.51h-9.078m48.63 4.02c-2.683-2.68-6.46-4.02-11.335-4.02h-18.027v46.507h9.085V460.97h8.943c4.877 0 8.654-1.336 11.337-4.014 2.68-2.678 4.013-6.608 4.013-11.788s-1.332-9.112-4.013-11.79v-.003zm-6.795 17.666c-1.154 1.177-2.822 1.768-5 1.768h-8.484v-15.354h8.485c4.483 0 6.734 2.572 6.734 7.71 0 2.744-.583 4.703-1.735 5.88v-.004z"/></svg>
                    </a>
                    <form class="header__search">
                        <input type="search" class="searchbox searchbox--collapsed" data-docsearch placeholder="Search documentation...">
                    </form>
                    <div class="header__menu">
    <button class="hamburger" aria-expanded="false" aria-controls="off-canvas-menu" data-off-canvas-menu-toggle>
        <div class="hamburger__box">
            <div class="hamburger__inner">
                <span class="visually-hidden">Menu</span>
            </div>
        </div>
    </button>
</div>
<nav id="off-canvas-menu" class="off-canvas-menu" aria-hidden="true">
    <div class="off-canvas-menu__content">
        <button aria-label="Close menu" class="off-canvas-menu__close" aria-expanded="false" aria-controls="off-canvas-menu" data-off-canvas-menu-toggle>
            <i class="icon-x" aria-hidden="true"></i>
        </button>

        <section class="off-canvas-menu__section">
            <a class="off-canvas-menu__section-top" href="../">Home</a>
        </section>

        <section class="off-canvas-menu__section">
            <a class="off-canvas-menu__section-top" href="../changelog.html">Changelog</a>
        </section>
            <section class="off-canvas-menu__section">
            <h3 class="off-canvas-menu__section-header">Core Components</h3>
            <ul class="off-canvas-menu__list">
                            <li>
                    <a class="off-canvas-menu__link" href="../event-loop/">
                        EventLoop

                        <span class="off-canvas-menu__version">
                            v1.0.0
                        </span>
                    </a>
                </li>
                            <li>
                    <a class="off-canvas-menu__link" href="../stream/">
                        Stream

                        <span class="off-canvas-menu__version">
                            v1.0.0
                        </span>
                    </a>
                </li>
                            <li>
                    <a class="off-canvas-menu__link" href="../promise/">
                        Promise

                        <span class="off-canvas-menu__version">
                            v2.7.0
                        </span>
                    </a>
                </li>
                        </ul>
        </section>
            <section class="off-canvas-menu__section">
            <h3 class="off-canvas-menu__section-header">Network Components</h3>
            <ul class="off-canvas-menu__list">
                            <li>
                    <a class="off-canvas-menu__link" href="../socket/">
                        Socket

                        <span class="off-canvas-menu__version">
                            v1.0.0
                        </span>
                    </a>
                </li>
                            <li>
                    <a class="off-canvas-menu__link" href="../datagram/">
                        Datagram

                        <span class="off-canvas-menu__version">
                            v1.4.0
                        </span>
                    </a>
                </li>
                        </ul>
        </section>
            <section class="off-canvas-menu__section">
            <h3 class="off-canvas-menu__section-header">Protocol Components</h3>
            <ul class="off-canvas-menu__list">
                            <li>
                    <a class="off-canvas-menu__link" href="../http/">
                        HTTP

                        <span class="off-canvas-menu__version">
                            v0.8.3
                        </span>
                    </a>
                </li>
                            <li>
                    <a class="off-canvas-menu__link" href="../http-client/">
                        HTTPClient

                        <span class="off-canvas-menu__version">
                            v0.5.9
                        </span>
                    </a>
                </li>
                            <li>
                    <a class="off-canvas-menu__link" href="../dns/">
                        DNS

                        <span class="off-canvas-menu__version">
                            v0.4.15
                        </span>
                    </a>
                </li>
                        </ul>
        </section>
            <section class="off-canvas-menu__section">
            <h3 class="off-canvas-menu__section-header">Utility Components</h3>
            <ul class="off-canvas-menu__list">
                            <li>
                    <a class="off-canvas-menu__link" href="../cache/">
                        Cache

                        <span class="off-canvas-menu__version">
                            v0.5.0
                        </span>
                    </a>
                </li>
                            <li>
                    <a class="off-canvas-menu__link" href="../child-process/">
                        ChildProcess

                        <span class="off-canvas-menu__version">
                            v0.5.2
                        </span>
                    </a>
                </li>
                            <li>
                    <a class="off-canvas-menu__link" href="../promise-timer/">
                        PromiseTimer

                        <span class="off-canvas-menu__version">
                            v1.5.0
                        </span>
                    </a>
                </li>
                            <li>
                    <a class="off-canvas-menu__link" href="../promise-stream/">
                        PromiseStream

                        <span class="off-canvas-menu__version">
                            v1.1.1
                        </span>
                    </a>
                </li>
                        </ul>
        </section>
        </div>
</nav>
                </div>
            </div>
        </header>
    
        <div class="container">
        <div class="wrapper">
            <div class="grid grid--wrap grid--gutter">
                <main class="main">
                                    <h1>EventLoop</h1>

                    
<p><a href="https://travis-ci.org/reactphp/event-loop" rel="nofollow"><img src="https://camo.githubusercontent.com/0de638bebe534e1474beb7f4e9c409ae169a12a0/68747470733a2f2f7472617669732d63692e6f72672f72656163747068702f6576656e742d6c6f6f702e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/reactphp/event-loop.svg?branch=master" style="max-width:100%;"></a></p>
<p><a href="https://reactphp.org/" rel="nofollow">ReactPHP</a>'s core reactor event loop that libraries can use for evented I/O.</p>
<p>In order for async based libraries to be interoperable, they need to use the
same event loop. This component provides a common <code>LoopInterface</code> that any
library can target. This allows them to be used in the same loop, with one
single <a href="#run"><code>run()</code></a> call that is controlled by the user.</p>
<p><strong>Table of Contents</strong></p>
<ul>
<li><a href="#quickstart-example">Quickstart example</a></li>
<li>
<a href="#usage">Usage</a>
<ul>
<li>
<a href="#factory">Factory</a>
<ul>
<li><a href="#create">create()</a></li>
</ul>
</li>
<li>
<a href="#loop-implementations">Loop implementations</a>
<ul>
<li><a href="#streamselectloop">StreamSelectLoop</a></li>
<li><a href="#exteventloop">ExtEventLoop</a></li>
<li><a href="#extlibeventloop">ExtLibeventLoop</a></li>
<li><a href="#extlibevloop">ExtLibevLoop</a></li>
<li><a href="#extevloop">ExtEvLoop</a></li>
</ul>
</li>
<li>
<a href="#loopinterface">LoopInterface</a>
<ul>
<li><a href="#run">run()</a></li>
<li><a href="#stop">stop()</a></li>
<li><a href="#addtimer">addTimer()</a></li>
<li><a href="#addperiodictimer">addPeriodicTimer()</a></li>
<li><a href="#canceltimer">cancelTimer()</a></li>
<li><a href="#futuretick">futureTick()</a></li>
<li><a href="#addsignal">addSignal()</a></li>
<li><a href="#removesignal">removeSignal()</a></li>
<li><a href="#addreadstream">addReadStream()</a></li>
<li><a href="#addwritestream">addWriteStream()</a></li>
<li><a href="#removereadstream">removeReadStream()</a></li>
<li><a href="#removewritestream">removeWriteStream()</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#install">Install</a></li>
<li><a href="#tests">Tests</a></li>
<li><a href="#license">License</a></li>
<li><a href="#more">More</a></li>
</ul>
<h2>
<a id="quickstart-example" class="anchor" href="#quickstart-example" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Quickstart example</h2>
<p>Here is an async HTTP server built with just the event loop.</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$loop</span> <span class="pl-k">=</span> <span class="pl-c1">React\EventLoop\</span><span class="pl-c1">Factory</span><span class="pl-k">::</span>create();</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$server</span> <span class="pl-k">=</span> <span class="pl-c1">stream_socket_server</span>(<span class="pl-s"><span class="pl-pds">'</span>tcp://127.0.0.1:8080<span class="pl-pds">'</span></span>);</span>
<span class="pl-s1"><span class="pl-c1">stream_set_blocking</span>(<span class="pl-smi">$server</span>, <span class="pl-c1">false</span>);</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$loop</span><span class="pl-k">-&gt;</span>addReadStream(<span class="pl-smi">$server</span>, <span class="pl-k">function</span> (<span class="pl-smi">$server</span>) <span class="pl-k">use</span> (<span class="pl-smi">$loop</span>) {</span>
<span class="pl-s1">    <span class="pl-smi">$conn</span> <span class="pl-k">=</span> <span class="pl-c1">stream_socket_accept</span>(<span class="pl-smi">$server</span>);</span>
<span class="pl-s1">    <span class="pl-smi">$data</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>HTTP/1.1 200 OK<span class="pl-cce">\r\n</span>Content-Length: 3<span class="pl-cce">\r\n\r\n</span>Hi<span class="pl-cce">\n</span><span class="pl-pds">"</span></span>;</span>
<span class="pl-s1">    <span class="pl-smi">$loop</span><span class="pl-k">-&gt;</span>addWriteStream(<span class="pl-smi">$conn</span>, <span class="pl-k">function</span> (<span class="pl-smi">$conn</span>) <span class="pl-k">use</span> (<span class="pl-k">&amp;</span><span class="pl-smi">$data</span>, <span class="pl-smi">$loop</span>) {</span>
<span class="pl-s1">        <span class="pl-smi">$written</span> <span class="pl-k">=</span> <span class="pl-c1">fwrite</span>(<span class="pl-smi">$conn</span>, <span class="pl-smi">$data</span>);</span>
<span class="pl-s1">        <span class="pl-k">if</span> (<span class="pl-smi">$written</span> <span class="pl-k">===</span> <span class="pl-c1">strlen</span>(<span class="pl-smi">$data</span>)) {</span>
<span class="pl-s1">            <span class="pl-c1">fclose</span>(<span class="pl-smi">$conn</span>);</span>
<span class="pl-s1">            <span class="pl-smi">$loop</span><span class="pl-k">-&gt;</span>removeWriteStream(<span class="pl-smi">$conn</span>);</span>
<span class="pl-s1">        } <span class="pl-k">else</span> {</span>
<span class="pl-s1">            <span class="pl-smi">$data</span> <span class="pl-k">=</span> <span class="pl-c1">substr</span>(<span class="pl-smi">$data</span>, <span class="pl-smi">$written</span>);</span>
<span class="pl-s1">        }</span>
<span class="pl-s1">    });</span>
<span class="pl-s1">});</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$loop</span><span class="pl-k">-&gt;</span>addPeriodicTimer(<span class="pl-c1">5</span>, <span class="pl-k">function</span> () {</span>
<span class="pl-s1">    <span class="pl-smi">$memory</span> <span class="pl-k">=</span> <span class="pl-c1">memory_get_usage</span>() <span class="pl-k">/</span> <span class="pl-c1">1024</span>;</span>
<span class="pl-s1">    <span class="pl-smi">$formatted</span> <span class="pl-k">=</span> <span class="pl-c1">number_format</span>(<span class="pl-smi">$memory</span>, <span class="pl-c1">3</span>)<span class="pl-k">.</span><span class="pl-s"><span class="pl-pds">'</span>K<span class="pl-pds">'</span></span>;</span>
<span class="pl-s1">    <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span>Current memory usage: {<span class="pl-smi">$formatted</span>}<span class="pl-cce">\n</span><span class="pl-pds">"</span></span>;</span>
<span class="pl-s1">});</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$loop</span><span class="pl-k">-&gt;</span>run();</span></pre></div>
<p>See also the <a href="https://github.com/reactphp/event-loop/blob/v1.0.0/examples">examples</a>.</p>
<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Usage</h2>
<p>Typical applications use a single event loop which is created at the beginning
and run at the end of the program.</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-c"><span class="pl-c">//</span> [1]</span></span>
<span class="pl-s1"><span class="pl-smi">$loop</span> <span class="pl-k">=</span> <span class="pl-c1">React\EventLoop\</span><span class="pl-c1">Factory</span><span class="pl-k">::</span>create();</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-c"><span class="pl-c">//</span> [2]</span></span>
<span class="pl-s1"><span class="pl-smi">$loop</span><span class="pl-k">-&gt;</span>addPeriodicTimer(<span class="pl-c1">1</span>, <span class="pl-k">function</span> () {</span>
<span class="pl-s1">    <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span>Tick<span class="pl-cce">\n</span><span class="pl-pds">"</span></span>;</span>
<span class="pl-s1">});</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$stream</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-c1">React\Stream\</span><span class="pl-c1">ReadableResourceStream</span>(</span>
<span class="pl-s1">    <span class="pl-c1">fopen</span>(<span class="pl-s"><span class="pl-pds">'</span>file.txt<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>r<span class="pl-pds">'</span></span>),</span>
<span class="pl-s1">    <span class="pl-smi">$loop</span></span>
<span class="pl-s1">);</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-c"><span class="pl-c">//</span> [3]</span></span>
<span class="pl-s1"><span class="pl-smi">$loop</span><span class="pl-k">-&gt;</span>run();</span></pre></div>
<ol>
<li>The loop instance is created at the beginning of the program. A convenience
factory <a href="#create"><code>React\EventLoop\Factory::create()</code></a> is provided by this library which
picks the best available <a href="#loop-implementations">loop implementation</a>.</li>
<li>The loop instance is used directly or passed to library and application code.
In this example, a periodic timer is registered with the event loop which
simply outputs <code>Tick</code> every second and a
<a href="../stream/#readableresourcestream">readable stream</a>
is created by using ReactPHP's
<a href="../stream/">stream component</a> for demonstration
purposes.</li>
<li>The loop is run with a single <a href="#run"><code>$loop-&gt;run()</code></a> call at the end of the program.</li>
</ol>
<h3>
<a id="factory" class="anchor" href="#factory" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Factory</h3>
<p>The <code>Factory</code> class exists as a convenient way to pick the best available
<a href="#loop-implementations">event loop implementation</a>.</p>
<h4>
<a id="create" class="anchor" href="#create" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>create()</h4>
<p>The <code>create(): LoopInterface</code> method can be used to create a new event loop
instance:</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$loop</span> <span class="pl-k">=</span> <span class="pl-c1">React\EventLoop\</span><span class="pl-c1">Factory</span><span class="pl-k">::</span>create();</span></pre></div>
<p>This method always returns an instance implementing <a href="#loopinterface"><code>LoopInterface</code></a>,
the actual <a href="#loop-implementations">event loop implementation</a> is an implementation detail.</p>
<p>This method should usually only be called once at the beginning of the program.</p>
<h3>
<a id="loop-implementations" class="anchor" href="#loop-implementations" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Loop implementations</h3>
<p>In addition to the <a href="#loopinterface"><code>LoopInterface</code></a>, there are a number of
event loop implementations provided.</p>
<p>All of the event loops support these features:</p>
<ul>
<li>File descriptor polling</li>
<li>One-off timers</li>
<li>Periodic timers</li>
<li>Deferred execution on future loop tick</li>
</ul>
<p>For most consumers of this package, the underlying event loop implementation is
an implementation detail.
You should use the <a href="#factory"><code>Factory</code></a> to automatically create a new instance.</p>
<p>Advanced! If you explicitly need a certain event loop implementation, you can
manually instantiate one of the following classes.
Note that you may have to install the required PHP extensions for the respective
event loop implementation first or they will throw a <code>BadMethodCallException</code> on creation.</p>
<h4>
<a id="streamselectloop" class="anchor" href="#streamselectloop" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>StreamSelectLoop</h4>
<p>A <code>stream_select()</code> based event loop.</p>
<p>This uses the <a href="http://php.net/manual/en/function.stream-select.php" rel="nofollow"><code>stream_select()</code></a>
function and is the only implementation which works out of the box with PHP.</p>
<p>This event loop works out of the box on PHP 5.3 through PHP 7+ and HHVM.
This means that no installation is required and this library works on all
platforms and supported PHP versions.
Accordingly, the <a href="#factory"><code>Factory</code></a> will use this event loop by default if
you do not install any of the event loop extensions listed below.</p>
<p>Under the hood, it does a simple <code>select</code> system call.
This system call is limited to the maximum file descriptor number of
<code>FD_SETSIZE</code> (platform dependent, commonly 1024) and scales with <code>O(m)</code>
(<code>m</code> being the maximum file descriptor number passed).
This means that you may run into issues when handling thousands of streams
concurrently and you may want to look into using one of the alternative
event loop implementations listed below in this case.
If your use case is among the many common use cases that involve handling only
dozens or a few hundred streams at once, then this event loop implementation
performs really well.</p>
<p>If you want to use signal handling (see also <a href="#addsignal"><code>addSignal()</code></a> below),
this event loop implementation requires <code>ext-pcntl</code>.
This extension is only available for Unix-like platforms and does not support
Windows.
It is commonly installed as part of many PHP distributions.
If this extension is missing (or you're running on Windows), signal handling is
not supported and throws a <code>BadMethodCallException</code> instead.</p>
<p>This event loop is known to rely on wall-clock time to schedule future
timers, because a monotonic time source is not available in PHP by default.
While this does not affect many common use cases, this is an important
distinction for programs that rely on a high time precision or on systems
that are subject to discontinuous time adjustments (time jumps).
This means that if you schedule a timer to trigger in 30s and then adjust
your system time forward by 20s, the timer may trigger in 10s.
See also <a href="#addtimer"><code>addTimer()</code></a> for more details.</p>
<h4>
<a id="exteventloop" class="anchor" href="#exteventloop" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>ExtEventLoop</h4>
<p>An <code>ext-event</code> based event loop.</p>
<p>This uses the <a href="https://pecl.php.net/package/event" rel="nofollow"><code>event</code> PECL extension</a>.
It supports the same backends as libevent.</p>
<p>This loop is known to work with PHP 5.4 through PHP 7+.</p>
<h4>
<a id="extevloop" class="anchor" href="#extevloop" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>ExtEvLoop</h4>
<p>An <code>ext-ev</code> based event loop.</p>
<p>This loop uses the <a href="https://pecl.php.net/package/ev" rel="nofollow"><code>ev</code> PECL extension</a>, that
provides an interface to <code>libev</code> library.</p>
<p>This loop is known to work with PHP 5.4 through PHP 7+.</p>
<h4>
<a id="extlibeventloop" class="anchor" href="#extlibeventloop" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>ExtLibeventLoop</h4>
<p>An <code>ext-libevent</code> based event loop.</p>
<p>This uses the <a href="https://pecl.php.net/package/libevent" rel="nofollow"><code>libevent</code> PECL extension</a>.
<code>libevent</code> itself supports a number of system-specific backends (epoll, kqueue).</p>
<p>This event loop does only work with PHP 5.
An <a href="https://github.com/php/pecl-event-libevent/pull/2">unofficial update</a> for
PHP 7 does exist, but it is known to cause regular crashes due to <code>SEGFAULT</code>s.
To reiterate: Using this event loop on PHP 7 is not recommended.
Accordingly, the <a href="#factory"><code>Factory</code></a> will not try to use this event loop on
PHP 7.</p>
<p>This event loop is known to trigger a readable listener only if
the stream <em>becomes</em> readable (edge-triggered) and may not trigger if the
stream has already been readable from the beginning.
This also implies that a stream may not be recognized as readable when data
is still left in PHP's internal stream buffers.
As such, it's recommended to use <code>stream_set_read_buffer($stream, 0);</code>
to disable PHP's internal read buffer in this case.
See also <a href="#addreadstream"><code>addReadStream()</code></a> for more details.</p>
<h4>
<a id="extlibevloop" class="anchor" href="#extlibevloop" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>ExtLibevLoop</h4>
<p>An <code>ext-libev</code> based event loop.</p>
<p>This uses an <a href="https://github.com/m4rw3r/php-libev">unofficial <code>libev</code> extension</a>.
It supports the same backends as libevent.</p>
<p>This loop does only work with PHP 5.
An update for PHP 7 is <a href="https://github.com/m4rw3r/php-libev/issues/8">unlikely</a>
to happen any time soon.</p>
<h3>
<a id="loopinterface" class="anchor" href="#loopinterface" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>LoopInterface</h3>
<h4>
<a id="run" class="anchor" href="#run" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>run()</h4>
<p>The <code>run(): void</code> method can be used to
run the event loop until there are no more tasks to perform.</p>
<p>For many applications, this method is the only directly visible
invocation on the event loop.
As a rule of thumb, it is usally recommended to attach everything to the
same loop instance and then run the loop once at the bottom end of the
application.</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$loop</span><span class="pl-k">-&gt;</span>run();</span></pre></div>
<p>This method will keep the loop running until there are no more tasks
to perform. In other words: This method will block until the last
timer, stream and/or signal has been removed.</p>
<p>Likewise, it is imperative to ensure the application actually invokes
this method once. Adding listeners to the loop and missing to actually
run it will result in the application exiting without actually waiting
for any of the attached listeners.</p>
<p>This method MUST NOT be called while the loop is already running.
This method MAY be called more than once after it has explicity been
<a href="#stop"><code>stop()</code>ped</a> or after it automatically stopped because it
previously did no longer have anything to do.</p>
<h4>
<a id="stop" class="anchor" href="#stop" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>stop()</h4>
<p>The <code>stop(): void</code> method can be used to
instruct a running event loop to stop.</p>
<p>This method is considered advanced usage and should be used with care.
As a rule of thumb, it is usually recommended to let the loop stop
only automatically when it no longer has anything to do.</p>
<p>This method can be used to explicitly instruct the event loop to stop:</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$loop</span><span class="pl-k">-&gt;</span>addTimer(<span class="pl-c1">3.0</span>, <span class="pl-k">function</span> () <span class="pl-k">use</span> (<span class="pl-smi">$loop</span>) {</span>
<span class="pl-s1">    <span class="pl-smi">$loop</span><span class="pl-k">-&gt;</span>stop();</span>
<span class="pl-s1">});</span></pre></div>
<p>Calling this method on a loop instance that is not currently running or
on a loop instance that has already been stopped has no effect.</p>
<h4>
<a id="addtimer" class="anchor" href="#addtimer" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>addTimer()</h4>
<p>The <code>addTimer(float $interval, callable $callback): TimerInterface</code> method can be used to
enqueue a callback to be invoked once after the given interval.</p>
<p>The timer callback function MUST be able to accept a single parameter,
the timer instance as also returned by this method or you MAY use a
function which has no parameters at all.</p>
<p>The timer callback function MUST NOT throw an <code>Exception</code>.
The return value of the timer callback function will be ignored and has
no effect, so for performance reasons you're recommended to not return
any excessive data structures.</p>
<p>Unlike <a href="#addperiodictimer"><code>addPeriodicTimer()</code></a>, this method will ensure
the callback will be invoked only once after the given interval.
You can invoke <a href="#canceltimer"><code>cancelTimer</code></a> to cancel a pending timer.</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$loop</span><span class="pl-k">-&gt;</span>addTimer(<span class="pl-c1">0.8</span>, <span class="pl-k">function</span> () {</span>
<span class="pl-s1">    <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>world!<span class="pl-pds">'</span></span> <span class="pl-k">.</span> <span class="pl-c1">PHP_EOL</span>;</span>
<span class="pl-s1">});</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$loop</span><span class="pl-k">-&gt;</span>addTimer(<span class="pl-c1">0.3</span>, <span class="pl-k">function</span> () {</span>
<span class="pl-s1">    <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>hello <span class="pl-pds">'</span></span>;</span>
<span class="pl-s1">});</span></pre></div>
<p>See also <a href="https://github.com/reactphp/event-loop/blob/v1.0.0/examples">example #1</a>.</p>
<p>If you want to access any variables within your callback function, you
can bind arbitrary data to a callback closure like this:</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-k">function</span> <span class="pl-en">hello</span>(<span class="pl-smi">$name</span>, <span class="pl-c1">LoopInterface</span> <span class="pl-smi">$loop</span>)</span>
<span class="pl-s1">{</span>
<span class="pl-s1">    <span class="pl-smi">$loop</span><span class="pl-k">-&gt;</span>addTimer(<span class="pl-c1">1.0</span>, <span class="pl-k">function</span> () <span class="pl-k">use</span> (<span class="pl-smi">$name</span>) {</span>
<span class="pl-s1">        <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span>hello <span class="pl-smi">$name</span><span class="pl-cce">\n</span><span class="pl-pds">"</span></span>;</span>
<span class="pl-s1">    });</span>
<span class="pl-s1">}</span>
<span class="pl-s1"></span>
<span class="pl-s1">hello(<span class="pl-s"><span class="pl-pds">'</span>Tester<span class="pl-pds">'</span></span>, <span class="pl-smi">$loop</span>);</span></pre></div>
<p>This interface does not enforce any particular timer resolution, so
special care may have to be taken if you rely on very high precision with
millisecond accuracy or below. Event loop implementations SHOULD work on
a best effort basis and SHOULD provide at least millisecond accuracy
unless otherwise noted. Many existing event loop implementations are
known to provide microsecond accuracy, but it's generally not recommended
to rely on this high precision.</p>
<p>Similarly, the execution order of timers scheduled to execute at the
same time (within its possible accuracy) is not guaranteed.</p>
<p>This interface suggests that event loop implementations SHOULD use a
monotonic time source if available. Given that a monotonic time source is
not available on PHP by default, event loop implementations MAY fall back
to using wall-clock time.
While this does not affect many common use cases, this is an important
distinction for programs that rely on a high time precision or on systems
that are subject to discontinuous time adjustments (time jumps).
This means that if you schedule a timer to trigger in 30s and then adjust
your system time forward by 20s, the timer SHOULD still trigger in 30s.
See also <a href="#loop-implementations">event loop implementations</a> for more details.</p>
<h4>
<a id="addperiodictimer" class="anchor" href="#addperiodictimer" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>addPeriodicTimer()</h4>
<p>The <code>addPeriodicTimer(float $interval, callable $callback): TimerInterface</code> method can be used to
enqueue a callback to be invoked repeatedly after the given interval.</p>
<p>The timer callback function MUST be able to accept a single parameter,
the timer instance as also returned by this method or you MAY use a
function which has no parameters at all.</p>
<p>The timer callback function MUST NOT throw an <code>Exception</code>.
The return value of the timer callback function will be ignored and has
no effect, so for performance reasons you're recommended to not return
any excessive data structures.</p>
<p>Unlike <a href="#addtimer"><code>addTimer()</code></a>, this method will ensure the the
callback will be invoked infinitely after the given interval or until you
invoke <a href="#canceltimer"><code>cancelTimer</code></a>.</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$timer</span> <span class="pl-k">=</span> <span class="pl-smi">$loop</span><span class="pl-k">-&gt;</span>addPeriodicTimer(<span class="pl-c1">0.1</span>, <span class="pl-k">function</span> () {</span>
<span class="pl-s1">    <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>tick!<span class="pl-pds">'</span></span> <span class="pl-k">.</span> <span class="pl-c1">PHP_EOL</span>;</span>
<span class="pl-s1">});</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$loop</span><span class="pl-k">-&gt;</span>addTimer(<span class="pl-c1">1.0</span>, <span class="pl-k">function</span> () <span class="pl-k">use</span> (<span class="pl-smi">$loop</span>, <span class="pl-smi">$timer</span>) {</span>
<span class="pl-s1">    <span class="pl-smi">$loop</span><span class="pl-k">-&gt;</span>cancelTimer(<span class="pl-smi">$timer</span>);</span>
<span class="pl-s1">    <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>Done<span class="pl-pds">'</span></span> <span class="pl-k">.</span> <span class="pl-c1">PHP_EOL</span>;</span>
<span class="pl-s1">});</span></pre></div>
<p>See also <a href="https://github.com/reactphp/event-loop/blob/v1.0.0/examples">example #2</a>.</p>
<p>If you want to limit the number of executions, you can bind
arbitrary data to a callback closure like this:</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-k">function</span> <span class="pl-en">hello</span>(<span class="pl-smi">$name</span>, <span class="pl-c1">LoopInterface</span> <span class="pl-smi">$loop</span>)</span>
<span class="pl-s1">{</span>
<span class="pl-s1">    <span class="pl-smi">$n</span> <span class="pl-k">=</span> <span class="pl-c1">3</span>;</span>
<span class="pl-s1">    <span class="pl-smi">$loop</span><span class="pl-k">-&gt;</span>addPeriodicTimer(<span class="pl-c1">1.0</span>, <span class="pl-k">function</span> (<span class="pl-smi">$timer</span>) <span class="pl-k">use</span> (<span class="pl-smi">$name</span>, <span class="pl-smi">$loop</span>, <span class="pl-k">&amp;</span><span class="pl-smi">$n</span>) {</span>
<span class="pl-s1">        <span class="pl-k">if</span> (<span class="pl-smi">$n</span> <span class="pl-k">&gt;</span> <span class="pl-c1">0</span>) {</span>
<span class="pl-s1">            <span class="pl-k">--</span><span class="pl-smi">$n</span>;</span>
<span class="pl-s1">            <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span>hello <span class="pl-smi">$name</span><span class="pl-cce">\n</span><span class="pl-pds">"</span></span>;</span>
<span class="pl-s1">        } <span class="pl-k">else</span> {</span>
<span class="pl-s1">            <span class="pl-smi">$loop</span><span class="pl-k">-&gt;</span>cancelTimer(<span class="pl-smi">$timer</span>);</span>
<span class="pl-s1">        }</span>
<span class="pl-s1">    });</span>
<span class="pl-s1">}</span>
<span class="pl-s1"></span>
<span class="pl-s1">hello(<span class="pl-s"><span class="pl-pds">'</span>Tester<span class="pl-pds">'</span></span>, <span class="pl-smi">$loop</span>);</span></pre></div>
<p>This interface does not enforce any particular timer resolution, so
special care may have to be taken if you rely on very high precision with
millisecond accuracy or below. Event loop implementations SHOULD work on
a best effort basis and SHOULD provide at least millisecond accuracy
unless otherwise noted. Many existing event loop implementations are
known to provide microsecond accuracy, but it's generally not recommended
to rely on this high precision.</p>
<p>Similarly, the execution order of timers scheduled to execute at the
same time (within its possible accuracy) is not guaranteed.</p>
<p>This interface suggests that event loop implementations SHOULD use a
monotonic time source if available. Given that a monotonic time source is
not available on PHP by default, event loop implementations MAY fall back
to using wall-clock time.
While this does not affect many common use cases, this is an important
distinction for programs that rely on a high time precision or on systems
that are subject to discontinuous time adjustments (time jumps).
This means that if you schedule a timer to trigger in 30s and then adjust
your system time forward by 20s, the timer SHOULD still trigger in 30s.
See also <a href="#loop-implementations">event loop implementations</a> for more details.</p>
<p>Additionally, periodic timers may be subject to timer drift due to
re-scheduling after each invocation. As such, it's generally not
recommended to rely on this for high precision intervals with millisecond
accuracy or below.</p>
<h4>
<a id="canceltimer" class="anchor" href="#canceltimer" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>cancelTimer()</h4>
<p>The <code>cancelTimer(TimerInterface $timer): void</code> method can be used to
cancel a pending timer.</p>
<p>See also <a href="#addperiodictimer"><code>addPeriodicTimer()</code></a> and <a href="https://github.com/reactphp/event-loop/blob/v1.0.0/examples">example #2</a>.</p>
<p>Calling this method on a timer instance that has not been added to this
loop instance or on a timer that has already been cancelled has no effect.</p>
<h4>
<a id="futuretick" class="anchor" href="#futuretick" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>futureTick()</h4>
<p>The <code>futureTick(callable $listener): void</code> method can be used to
schedule a callback to be invoked on a future tick of the event loop.</p>
<p>This works very much similar to timers with an interval of zero seconds,
but does not require the overhead of scheduling a timer queue.</p>
<p>The tick callback function MUST be able to accept zero parameters.</p>
<p>The tick callback function MUST NOT throw an <code>Exception</code>.
The return value of the tick callback function will be ignored and has
no effect, so for performance reasons you're recommended to not return
any excessive data structures.</p>
<p>If you want to access any variables within your callback function, you
can bind arbitrary data to a callback closure like this:</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-k">function</span> <span class="pl-en">hello</span>(<span class="pl-smi">$name</span>, <span class="pl-c1">LoopInterface</span> <span class="pl-smi">$loop</span>)</span>
<span class="pl-s1">{</span>
<span class="pl-s1">    <span class="pl-smi">$loop</span><span class="pl-k">-&gt;</span>futureTick(<span class="pl-k">function</span> () <span class="pl-k">use</span> (<span class="pl-smi">$name</span>) {</span>
<span class="pl-s1">        <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span>hello <span class="pl-smi">$name</span><span class="pl-cce">\n</span><span class="pl-pds">"</span></span>;</span>
<span class="pl-s1">    });</span>
<span class="pl-s1">}</span>
<span class="pl-s1"></span>
<span class="pl-s1">hello(<span class="pl-s"><span class="pl-pds">'</span>Tester<span class="pl-pds">'</span></span>, <span class="pl-smi">$loop</span>);</span></pre></div>
<p>Unlike timers, tick callbacks are guaranteed to be executed in the order
they are enqueued.
Also, once a callback is enqueued, there's no way to cancel this operation.</p>
<p>This is often used to break down bigger tasks into smaller steps (a form
of cooperative multitasking).</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$loop</span><span class="pl-k">-&gt;</span>futureTick(<span class="pl-k">function</span> () {</span>
<span class="pl-s1">    <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>b<span class="pl-pds">'</span></span>;</span>
<span class="pl-s1">});</span>
<span class="pl-s1"><span class="pl-smi">$loop</span><span class="pl-k">-&gt;</span>futureTick(<span class="pl-k">function</span> () {</span>
<span class="pl-s1">    <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>c<span class="pl-pds">'</span></span>;</span>
<span class="pl-s1">});</span>
<span class="pl-s1"><span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>a<span class="pl-pds">'</span></span>;</span></pre></div>
<p>See also <a href="https://github.com/reactphp/event-loop/blob/v1.0.0/examples">example #3</a>.</p>
<h4>
<a id="addsignal" class="anchor" href="#addsignal" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>addSignal()</h4>
<p>The <code>addSignal(int $signal, callable $listener): void</code> method can be used to
register a listener to be notified when a signal has been caught by this process.</p>
<p>This is useful to catch user interrupt signals or shutdown signals from
tools like <code>supervisor</code> or <code>systemd</code>.</p>
<p>The listener callback function MUST be able to accept a single parameter,
the signal added by this method or you MAY use a function which
has no parameters at all.</p>
<p>The listener callback function MUST NOT throw an <code>Exception</code>.
The return value of the listener callback function will be ignored and has
no effect, so for performance reasons you're recommended to not return
any excessive data structures.</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$loop</span><span class="pl-k">-&gt;</span>addSignal(<span class="pl-c1">SIGINT</span>, <span class="pl-k">function</span> (<span class="pl-k">int</span> <span class="pl-smi">$signal</span>) {</span>
<span class="pl-s1">    <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">'</span>Caught user interrupt signal<span class="pl-pds">'</span></span> <span class="pl-k">.</span> <span class="pl-c1">PHP_EOL</span>;</span>
<span class="pl-s1">});</span></pre></div>
<p>See also <a href="https://github.com/reactphp/event-loop/blob/v1.0.0/examples">example #4</a>.</p>
<p>Signaling is only available on Unix-like platform, Windows isn't
supported due to operating system limitations.
This method may throw a <code>BadMethodCallException</code> if signals aren't
supported on this platform, for example when required extensions are
missing.</p>
<p><strong>Note: A listener can only be added once to the same signal, any
attempts to add it more then once will be ignored.</strong></p>
<h4>
<a id="removesignal" class="anchor" href="#removesignal" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>removeSignal()</h4>
<p>The <code>removeSignal(int $signal, callable $listener): void</code> method can be used to
remove a previously added signal listener.</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$loop</span><span class="pl-k">-&gt;</span>removeSignal(<span class="pl-c1">SIGINT</span>, <span class="pl-smi">$listener</span>);</span></pre></div>
<p>Any attempts to remove listeners that aren't registered will be ignored.</p>
<h4>
<a id="addreadstream" class="anchor" href="#addreadstream" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>addReadStream()</h4>
<blockquote>
<p>Advanced! Note that this low-level API is considered advanced usage.
Most use cases should probably use the higher-level
<a href="../stream/#readablestreaminterface">readable Stream API</a>
instead.</p>
</blockquote>
<p>The <code>addReadStream(resource $stream, callable $callback): void</code> method can be used to
register a listener to be notified when a stream is ready to read.</p>
<p>The first parameter MUST be a valid stream resource that supports
checking whether it is ready to read by this loop implementation.
A single stream resource MUST NOT be added more than once.
Instead, either call <a href="#removereadstream"><code>removeReadStream()</code></a> first or
react to this event with a single listener and then dispatch from this
listener. This method MAY throw an <code>Exception</code> if the given resource type
is not supported by this loop implementation.</p>
<p>The listener callback function MUST be able to accept a single parameter,
the stream resource added by this method or you MAY use a function which
has no parameters at all.</p>
<p>The listener callback function MUST NOT throw an <code>Exception</code>.
The return value of the listener callback function will be ignored and has
no effect, so for performance reasons you're recommended to not return
any excessive data structures.</p>
<p>If you want to access any variables within your callback function, you
can bind arbitrary data to a callback closure like this:</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$loop</span><span class="pl-k">-&gt;</span>addReadStream(<span class="pl-smi">$stream</span>, <span class="pl-k">function</span> (<span class="pl-smi">$stream</span>) <span class="pl-k">use</span> (<span class="pl-smi">$name</span>) {</span>
<span class="pl-s1">    <span class="pl-c1">echo</span> <span class="pl-smi">$name</span> <span class="pl-k">.</span> <span class="pl-s"><span class="pl-pds">'</span> said: <span class="pl-pds">'</span></span> <span class="pl-k">.</span> <span class="pl-c1">fread</span>(<span class="pl-smi">$stream</span>);</span>
<span class="pl-s1">});</span></pre></div>
<p>See also <a href="https://github.com/reactphp/event-loop/blob/v1.0.0/examples">example #11</a>.</p>
<p>You can invoke <a href="#removereadstream"><code>removeReadStream()</code></a> to remove the
read event listener for this stream.</p>
<p>The execution order of listeners when multiple streams become ready at
the same time is not guaranteed.</p>
<p>Some event loop implementations are known to only trigger the listener if
the stream <em>becomes</em> readable (edge-triggered) and may not trigger if the
stream has already been readable from the beginning.
This also implies that a stream may not be recognized as readable when data
is still left in PHP's internal stream buffers.
As such, it's recommended to use <code>stream_set_read_buffer($stream, 0);</code>
to disable PHP's internal read buffer in this case.</p>
<h4>
<a id="addwritestream" class="anchor" href="#addwritestream" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>addWriteStream()</h4>
<blockquote>
<p>Advanced! Note that this low-level API is considered advanced usage.
Most use cases should probably use the higher-level
<a href="../stream/#writablestreaminterface">writable Stream API</a>
instead.</p>
</blockquote>
<p>The <code>addWriteStream(resource $stream, callable $callback): void</code> method can be used to
register a listener to be notified when a stream is ready to write.</p>
<p>The first parameter MUST be a valid stream resource that supports
checking whether it is ready to write by this loop implementation.
A single stream resource MUST NOT be added more than once.
Instead, either call <a href="#removewritestream"><code>removeWriteStream()</code></a> first or
react to this event with a single listener and then dispatch from this
listener. This method MAY throw an <code>Exception</code> if the given resource type
is not supported by this loop implementation.</p>
<p>The listener callback function MUST be able to accept a single parameter,
the stream resource added by this method or you MAY use a function which
has no parameters at all.</p>
<p>The listener callback function MUST NOT throw an <code>Exception</code>.
The return value of the listener callback function will be ignored and has
no effect, so for performance reasons you're recommended to not return
any excessive data structures.</p>
<p>If you want to access any variables within your callback function, you
can bind arbitrary data to a callback closure like this:</p>
<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$loop</span><span class="pl-k">-&gt;</span>addWriteStream(<span class="pl-smi">$stream</span>, <span class="pl-k">function</span> (<span class="pl-smi">$stream</span>) <span class="pl-k">use</span> (<span class="pl-smi">$name</span>) {</span>
<span class="pl-s1">    <span class="pl-c1">fwrite</span>(<span class="pl-smi">$stream</span>, <span class="pl-s"><span class="pl-pds">'</span>Hello <span class="pl-pds">'</span></span> <span class="pl-k">.</span> <span class="pl-smi">$name</span>);</span>
<span class="pl-s1">});</span></pre></div>
<p>See also <a href="https://github.com/reactphp/event-loop/blob/v1.0.0/examples">example #12</a>.</p>
<p>You can invoke <a href="#removewritestream"><code>removeWriteStream()</code></a> to remove the
write event listener for this stream.</p>
<p>The execution order of listeners when multiple streams become ready at
the same time is not guaranteed.</p>
<h4>
<a id="removereadstream" class="anchor" href="#removereadstream" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>removeReadStream()</h4>
<p>The <code>removeReadStream(resource $stream): void</code> method can be used to
remove the read event listener for the given stream.</p>
<p>Removing a stream from the loop that has already been removed or trying
to remove a stream that was never added or is invalid has no effect.</p>
<h4>
<a id="removewritestream" class="anchor" href="#removewritestream" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>removeWriteStream()</h4>
<p>The <code>removeWriteStream(resource $stream): void</code> method can be used to
remove the write event listener for the given stream.</p>
<p>Removing a stream from the loop that has already been removed or trying
to remove a stream that was never added or is invalid has no effect.</p>
<h2>
<a id="install" class="anchor" href="#install" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Install</h2>
<p>The recommended way to install this library is <a href="https://getcomposer.org" rel="nofollow">through Composer</a>.
<a href="https://getcomposer.org/doc/00-intro.md" rel="nofollow">New to Composer?</a></p>
<p>This project follows <a href="https://semver.org/" rel="nofollow">SemVer</a>.
This will install the latest supported version:</p>
<div class="highlight highlight-source-shell"><pre>$ composer require react/event-loop:^1.0</pre></div>
<p>See also the <a href="changelog.html">CHANGELOG</a> for details about version upgrades.</p>
<p>This project aims to run on any platform and thus does not require any PHP
extensions and supports running on legacy PHP 5.3 through current PHP 7+ and
HHVM.
It's <em>highly recommended to use PHP 7+</em> for this project.</p>
<p>Installing any of the event loop extensions is suggested, but entirely optional.
See also <a href="#loop-implementations">event loop implementations</a> for more details.</p>
<h2>
<a id="tests" class="anchor" href="#tests" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Tests</h2>
<p>To run the test suite, you first need to clone this repo and then install all
dependencies <a href="https://getcomposer.org" rel="nofollow">through Composer</a>:</p>
<div class="highlight highlight-source-shell"><pre>$ composer install</pre></div>
<p>To run the test suite, go to the project root and run:</p>
<div class="highlight highlight-source-shell"><pre>$ php vendor/bin/phpunit</pre></div>
<h2>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>License</h2>
<p>MIT, see <a href="license.html">LICENSE file</a>.</p>
<h2>
<a id="more" class="anchor" href="#more" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>More</h2>
<ul>
<li>See our <a href="../stream/">Stream component</a> for more
information on how streams are used in real-world applications.</li>
<li>See our <a href="https://github.com/reactphp/react/wiki/Users">users wiki</a> and the
<a href="https://packagist.org/packages/react/event-loop/dependents" rel="nofollow">dependents on Packagist</a>
for a list of packages that use the EventLoop in real-world applications.</li>
</ul>
                                </main>
                <aside class="sidebar" role="complementary">
                    <section class="component-info">
                        <h2 class="component-info__title">
                            <a href="../event-loop/">EventLoop</a>

                            <div class="version-selector">
                                <button class="version-selector__button version-selector__button--latest" aria-expanded="false" aria-controls="component-version-selector" data-version-selector-toggle>
                                    v1.0.0

                                    <i class="icon-chevron-down" aria-hidden="true"></i>
                                    <i class="icon-chevron-up" aria-hidden="true"></i>
                                </button>

                                <div id="component-version-selector" class="version-selector__panel" aria-hidden="true">
                                    <p>Read the documentation of development and older versions on GitHub:</p>

                                    <ul class="version-selector__list">
                                        <li>
                                            <a href="https://github.com/reactphp/event-loop#readme" class="version-selector__version version-selector__version--dev">
                                                master
                                            </a>
                                        </li>
                                                                                                                                                                                                                    <li>
                                                <a href="https://github.com/reactphp/event-loop/tree/v0.5.3#readme" class="version-selector__version">
                                                    v0.5.3
                                                </a>
                                            </li>
                                                                                                                                                                            <li>
                                                <a href="https://github.com/reactphp/event-loop/tree/v0.5.2#readme" class="version-selector__version">
                                                    v0.5.2
                                                </a>
                                            </li>
                                                                                                                                                                            <li>
                                                <a href="https://github.com/reactphp/event-loop/tree/v0.5.1#readme" class="version-selector__version">
                                                    v0.5.1
                                                </a>
                                            </li>
                                                                                                                                                                            <li>
                                                <a href="https://github.com/reactphp/event-loop/tree/v0.5.0#readme" class="version-selector__version">
                                                    v0.5.0
                                                </a>
                                            </li>
                                                                                                                                                                            <li>
                                                <a href="https://github.com/reactphp/event-loop/tree/v0.4.3#readme" class="version-selector__version">
                                                    v0.4.3
                                                </a>
                                            </li>
                                                                                                                                                                            <li>
                                                <a href="https://github.com/reactphp/event-loop/tree/v0.3.5#readme" class="version-selector__version">
                                                    v0.3.5
                                                </a>
                                            </li>
                                                                                                                                                                            <li>
                                                <a href="https://github.com/reactphp/event-loop/tree/v0.4.2#readme" class="version-selector__version">
                                                    v0.4.2
                                                </a>
                                            </li>
                                                                                                                                                                            <li>
                                                <a href="https://github.com/reactphp/event-loop/tree/v0.4.1#readme" class="version-selector__version">
                                                    v0.4.1
                                                </a>
                                            </li>
                                                                                                                                                                            <li>
                                                <a href="https://github.com/reactphp/event-loop/tree/v0.4.0#readme" class="version-selector__version">
                                                    v0.4.0
                                                </a>
                                            </li>
                                                                                                                                                                            <li>
                                                <a href="https://github.com/reactphp/event-loop/tree/v0.3.4#readme" class="version-selector__version">
                                                    v0.3.4
                                                </a>
                                            </li>
                                                                                                                                                                            <li>
                                                <a href="https://github.com/reactphp/event-loop/tree/v0.3.3#readme" class="version-selector__version">
                                                    v0.3.3
                                                </a>
                                            </li>
                                                                                                                                                                            <li>
                                                <a href="https://github.com/reactphp/event-loop/tree/v0.3.0#readme" class="version-selector__version">
                                                    v0.3.0
                                                </a>
                                            </li>
                                                                                                                                                                            <li>
                                                <a href="https://github.com/reactphp/event-loop/tree/v0.2.7#readme" class="version-selector__version">
                                                    v0.2.7
                                                </a>
                                            </li>
                                                                                                                                                                            <li>
                                                <a href="https://github.com/reactphp/event-loop/tree/v0.2.6#readme" class="version-selector__version">
                                                    v0.2.6
                                                </a>
                                            </li>
                                                                                                                                                                            <li>
                                                <a href="https://github.com/reactphp/event-loop/tree/v0.2.3#readme" class="version-selector__version">
                                                    v0.2.3
                                                </a>
                                            </li>
                                                                                                                                                                            <li>
                                                <a href="https://github.com/reactphp/event-loop/tree/v0.2.0#readme" class="version-selector__version">
                                                    v0.2.0
                                                </a>
                                            </li>
                                                                                                                                                                            <li>
                                                <a href="https://github.com/reactphp/event-loop/tree/v0.1.1#readme" class="version-selector__version">
                                                    v0.1.1
                                                </a>
                                            </li>
                                                                                                                                                                            <li>
                                                <a href="https://github.com/reactphp/event-loop/tree/v0.1.0#readme" class="version-selector__version">
                                                    v0.1.0
                                                </a>
                                            </li>
                                                                                                                        </ul>
                                </div>
                            </div>
                        </h2>

                        <ul class="component-info__info">
                            <li>
                                <a href="https://github.com/reactphp/event-loop">
                                    <i class="icon-github" aria-hidden="true"></i> Repository
                                </a>
                            </li>
                            <li>
                                <a href="../event-loop/changelog.html">
                                    <i class="icon-calendar" aria-hidden="true"></i> Changelog
                                </a>
                            </li>
                            <li>
                                <a href="../event-loop/license.html">
                                    <i class="icon-law" aria-hidden="true"></i> MIT License
                                </a>
                            </li>
                        </ul>

                        <h3 class="component-info__subtitle">Installation</h3>

                        <div class="highlight highlight-source-shell"><pre>composer require react/event-loop:^1.0.0</pre></div>

                        <h3 class="component-info__subtitle">Contributors</h3>

                        <ul class="component-info__contributors">
                                                    <li>
                                <a href="https://github.com/clue">
                                    <img src="https://avatars1.githubusercontent.com/u/776829?v=4&amp;s=40" srcset="https://avatars1.githubusercontent.com/u/776829?v=4&amp;s=80 2x" alt="clue" title="clue (81 contributions)">
                                </a>
                            </li>
                                                    <li>
                                <a href="https://github.com/igorw">
                                    <img src="https://avatars2.githubusercontent.com/u/88061?v=4&amp;s=40" srcset="https://avatars2.githubusercontent.com/u/88061?v=4&amp;s=80 2x" alt="igorw" title="igorw (46 contributions)">
                                </a>
                            </li>
                                                    <li>
                                <a href="https://github.com/WyriHaximus">
                                    <img src="https://avatars2.githubusercontent.com/u/147145?v=4&amp;s=40" srcset="https://avatars2.githubusercontent.com/u/147145?v=4&amp;s=80 2x" alt="WyriHaximus" title="WyriHaximus (45 contributions)">
                                </a>
                            </li>
                                                    <li>
                                <a href="https://github.com/jsor">
                                    <img src="https://avatars2.githubusercontent.com/u/55574?v=4&amp;s=40" srcset="https://avatars2.githubusercontent.com/u/55574?v=4&amp;s=80 2x" alt="jsor" title="jsor (44 contributions)">
                                </a>
                            </li>
                                                    <li>
                                <a href="https://github.com/nrk">
                                    <img src="https://avatars0.githubusercontent.com/u/17923?v=4&amp;s=40" srcset="https://avatars0.githubusercontent.com/u/17923?v=4&amp;s=80 2x" alt="nrk" title="nrk (33 contributions)">
                                </a>
                            </li>
                                                    <li>
                                <a href="https://github.com/cboden">
                                    <img src="https://avatars0.githubusercontent.com/u/617694?v=4&amp;s=40" srcset="https://avatars0.githubusercontent.com/u/617694?v=4&amp;s=80 2x" alt="cboden" title="cboden (31 contributions)">
                                </a>
                            </li>
                                                    <li>
                                <a href="https://github.com/jmalloc">
                                    <img src="https://avatars3.githubusercontent.com/u/761536?v=4&amp;s=40" srcset="https://avatars3.githubusercontent.com/u/761536?v=4&amp;s=80 2x" alt="jmalloc" title="jmalloc (30 contributions)">
                                </a>
                            </li>
                                                    <li>
                                <a href="https://github.com/cebe">
                                    <img src="https://avatars0.githubusercontent.com/u/189796?v=4&amp;s=40" srcset="https://avatars0.githubusercontent.com/u/189796?v=4&amp;s=80 2x" alt="cebe" title="cebe (6 contribution)">
                                </a>
                            </li>
                                                    <li>
                                <a href="https://github.com/kaduev13">
                                    <img src="https://avatars3.githubusercontent.com/u/3984307?v=4&amp;s=40" srcset="https://avatars3.githubusercontent.com/u/3984307?v=4&amp;s=80 2x" alt="kaduev13" title="kaduev13 (6 contribution)">
                                </a>
                            </li>
                                                    <li>
                                <a href="https://github.com/martinschroeder">
                                    <img src="https://avatars3.githubusercontent.com/u/1255509?v=4&amp;s=40" srcset="https://avatars3.githubusercontent.com/u/1255509?v=4&amp;s=80 2x" alt="martinschroeder" title="martinschroeder (5 contribution)">
                                </a>
                            </li>
                                                    <li>
                                <a href="https://github.com/carusogabriel">
                                    <img src="https://avatars3.githubusercontent.com/u/16328050?v=4&amp;s=40" srcset="https://avatars3.githubusercontent.com/u/16328050?v=4&amp;s=80 2x" alt="carusogabriel" title="carusogabriel (4 contribution)">
                                </a>
                            </li>
                                                    <li>
                                <a href="https://github.com/Ocramius">
                                    <img src="https://avatars2.githubusercontent.com/u/154256?v=4&amp;s=40" srcset="https://avatars2.githubusercontent.com/u/154256?v=4&amp;s=80 2x" alt="Ocramius" title="Ocramius (4 contribution)">
                                </a>
                            </li>
                                                    <li>
                                <a href="https://github.com/cameronjacobson">
                                    <img src="https://avatars1.githubusercontent.com/u/2303661?v=4&amp;s=40" srcset="https://avatars1.githubusercontent.com/u/2303661?v=4&amp;s=80 2x" alt="cameronjacobson" title="cameronjacobson (3 contribution)">
                                </a>
                            </li>
                                                    <li>
                                <a href="https://github.com/kelunik">
                                    <img src="https://avatars0.githubusercontent.com/u/2743004?v=4&amp;s=40" srcset="https://avatars0.githubusercontent.com/u/2743004?v=4&amp;s=80 2x" alt="kelunik" title="kelunik (3 contribution)">
                                </a>
                            </li>
                                                    <li>
                                <a href="https://github.com/steverhoades">
                                    <img src="https://avatars0.githubusercontent.com/u/1146668?v=4&amp;s=40" srcset="https://avatars0.githubusercontent.com/u/1146668?v=4&amp;s=80 2x" alt="steverhoades" title="steverhoades (2 contribution)">
                                </a>
                            </li>
                                                    <li>
                                <a href="https://github.com/nawarian">
                                    <img src="https://avatars2.githubusercontent.com/u/3905582?v=4&amp;s=40" srcset="https://avatars2.githubusercontent.com/u/3905582?v=4&amp;s=80 2x" alt="nawarian" title="nawarian (2 contribution)">
                                </a>
                            </li>
                                                    <li>
                                <a href="https://github.com/andrewminerd">
                                    <img src="https://avatars3.githubusercontent.com/u/488901?v=4&amp;s=40" srcset="https://avatars3.githubusercontent.com/u/488901?v=4&amp;s=80 2x" alt="andrewminerd" title="andrewminerd (1 contribution)">
                                </a>
                            </li>
                                                    <li>
                                <a href="https://github.com/DaveRandom">
                                    <img src="https://avatars1.githubusercontent.com/u/2396425?v=4&amp;s=40" srcset="https://avatars1.githubusercontent.com/u/2396425?v=4&amp;s=80 2x" alt="DaveRandom" title="DaveRandom (1 contribution)">
                                </a>
                            </li>
                                                    <li>
                                <a href="https://github.com/Donatello-za">
                                    <img src="https://avatars3.githubusercontent.com/u/2649302?v=4&amp;s=40" srcset="https://avatars3.githubusercontent.com/u/2649302?v=4&amp;s=80 2x" alt="Donatello-za" title="Donatello-za (1 contribution)">
                                </a>
                            </li>
                                                    <li>
                                <a href="https://github.com/greevex">
                                    <img src="https://avatars3.githubusercontent.com/u/148401?v=4&amp;s=40" srcset="https://avatars3.githubusercontent.com/u/148401?v=4&amp;s=80 2x" alt="greevex" title="greevex (1 contribution)">
                                </a>
                            </li>
                                                    <li>
                                <a href="https://github.com/lt">
                                    <img src="https://avatars1.githubusercontent.com/u/1503065?v=4&amp;s=40" srcset="https://avatars1.githubusercontent.com/u/1503065?v=4&amp;s=80 2x" alt="lt" title="lt (1 contribution)">
                                </a>
                            </li>
                                                    <li>
                                <a href="https://github.com/lcobucci">
                                    <img src="https://avatars2.githubusercontent.com/u/201963?v=4&amp;s=40" srcset="https://avatars2.githubusercontent.com/u/201963?v=4&amp;s=80 2x" alt="lcobucci" title="lcobucci (1 contribution)">
                                </a>
                            </li>
                                                    <li>
                                <a href="https://github.com/mkrauser">
                                    <img src="https://avatars1.githubusercontent.com/u/494845?v=4&amp;s=40" srcset="https://avatars1.githubusercontent.com/u/494845?v=4&amp;s=80 2x" alt="mkrauser" title="mkrauser (1 contribution)">
                                </a>
                            </li>
                                                    <li>
                                <a href="https://github.com/ondrejmirtes">
                                    <img src="https://avatars0.githubusercontent.com/u/104888?v=4&amp;s=40" srcset="https://avatars0.githubusercontent.com/u/104888?v=4&amp;s=80 2x" alt="ondrejmirtes" title="ondrejmirtes (1 contribution)">
                                </a>
                            </li>
                                                    <li>
                                <a href="https://github.com/pborreli">
                                    <img src="https://avatars2.githubusercontent.com/u/77759?v=4&amp;s=40" srcset="https://avatars2.githubusercontent.com/u/77759?v=4&amp;s=80 2x" alt="pborreli" title="pborreli (1 contribution)">
                                </a>
                            </li>
                                                    <li>
                                <a href="https://github.com/seregazhuk">
                                    <img src="https://avatars3.githubusercontent.com/u/9959761?v=4&amp;s=40" srcset="https://avatars3.githubusercontent.com/u/9959761?v=4&amp;s=80 2x" alt="seregazhuk" title="seregazhuk (1 contribution)">
                                </a>
                            </li>
                                                    <li>
                                <a href="https://github.com/dandelionred">
                                    <img src="https://avatars0.githubusercontent.com/u/19490344?v=4&amp;s=40" srcset="https://avatars0.githubusercontent.com/u/19490344?v=4&amp;s=80 2x" alt="dandelionred" title="dandelionred (1 contribution)">
                                </a>
                            </li>
                                                    <li>
                                <a href="https://github.com/e3betht">
                                    <img src="https://avatars0.githubusercontent.com/u/1811561?v=4&amp;s=40" srcset="https://avatars0.githubusercontent.com/u/1811561?v=4&amp;s=80 2x" alt="e3betht" title="e3betht (1 contribution)">
                                </a>
                            </li>
                                                </ul>

                        <h3 class="component-info__subtitle">Activity</h3>

                        <div class="component-info__participation">
                            <svg width="320" height="42">
    <defs>
        <linearGradient id="reactphp-event-loop-participation-gradient" x1="0" x2="0" y1="1" y2="0">
            <stop offset="10%" stop-color="#40a977"></stop>
            <stop offset="90%" stop-color="#ba3525"></stop>
        </linearGradient>
        <mask id="reactphp-event-loop-participation-sparkline" x="0" y="0" width="320" height="40" >
            <polyline 
                transform="translate(0, 40) scale(1,-1)"
                points="0,1 6,3 12,4 18,4 24,1 30,1 36,1 42,1 48,1 54,1 60,1 66,1 72,1 78,11 84,1 90,3 96,2 102,13 108,2 114,1 120,27 126,1 132,5 138,6 144,4 150,1 156,8 162,3 168,2 174,3 180,3 186,1 192,2 198,2 204,5 210,2 216,7 222,3 228,9 234,1 240,6 246,1 252,1 258,3 264,1 270,1 276,1 282,1 288,5 294,3 300,2 306,2" 
                fill="transparent" 
                stroke="#40a977" 
                stroke-width="2"
            >
        </mask>
    </defs>

    <g transform="translate(0, -1.5)">
        <rect 
            x="0" 
            y="-2" 
            width="320" 
            height="42"
            style="stroke:none;fill:url(#reactphp-event-loop-participation-gradient);mask:url(#reactphp-event-loop-participation-sparkline)"
        ></rect>
    </g>
</svg>
                        </div>
                    </section>
                </aside>
            </div>
        </div>
    </div>

            <footer class="footer">
            <div class="wrapper">
                <ul class="links">
                    <li><a href="https://github.com/reactphp"><i class="icon-github" aria-hidden="true"></i> GitHub</a></li>
                    <li><a href="https://twitter.com/reactphp"><i class="icon-twitter" aria-hidden="true"></i> Twitter</a></li>
                    <li><a href="irc://irc.freenode.net/reactphp"><i class="icon-hash" aria-hidden="true"></i> IRC</a></li>
                </ul>
            </div>
        </footer>
        </body>
</html>
